(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{539:function(e,t,s){"use strict";s.r(t);var l=s(42),a=Object(l.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"实现拖拽"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实现拖拽"}},[e._v("#")]),e._v(" 实现拖拽")]),e._v(" "),s("h3",{attrs:{id:"一-version1-0的具体实现原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一-version1-0的具体实现原理"}},[e._v("#")]),e._v(" 一.Version1.0的具体实现原理")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("mousedown")])]),e._v(" "),s("ul",[s("li",[e._v("mousedown事件发生时，将开始移动属性设置为true")])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("mousemove")])]),e._v(" "),s("ul",[s("li",[e._v("mousemove事件发生时，先判断isMove属性是否为true，根据isMove是否为true决定是否执行更新位置的操作")]),e._v(" "),s("li",[s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("let x = e.pageX - ball.offsetWidth / 2\nlet y = e.pageY - ball.offsetHeight / 2\nball.style.left = `${x}px`\nball.style.top = `${x}px`\n")])])])])])]),e._v(" "),s("li",[s("p",[s("code",[e._v("mouseup")])]),e._v(" "),s("ul",[s("li",[e._v("发生mouseup事件后，将isMove设置为false，使mousemove改变位置的操作不执行")])])])]),e._v(" "),s("p",[e._v("注意事项：")]),e._v(" "),s("ul",[s("li",[e._v("小球的"),s("code",[e._v("position")]),e._v("应设置为"),s("code",[e._v("absolute")])])]),e._v(" "),s("p",[e._v("该版本的缺陷：")]),e._v(" "),s("ul",[s("li",[e._v("移动的时候会脱离鼠标不动")]),e._v(" "),s("li",[e._v("原因：mousemove事件绑定到了元素本身，这意味着当鼠标移出元素所 占据的范围的时候，元素会停止移动。")])]),e._v(" "),s("h3",{attrs:{id:"二-version2-0修复bug"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二-version2-0修复bug"}},[e._v("#")]),e._v(" 二.Version2.0修复bug")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("  document.addEventListener('mousemove', (e) => {\n    if (!isMove) return\n    let x = e.pageX - ball.offsetWidth / 2\n    let y = e.pageY - ball.offsetHeight / 2\n    ball.style.left = `${x}px`\n    ball.style.top = `${y}px`\n  })\n")])])]),s("h3",{attrs:{id:"三-完整代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三-完整代码"}},[e._v("#")]),e._v(" 三.完整代码")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("   const ball = document.getElementById('ball')\n   let isMove = false\n   ball.addEventListener('mousedown', () => {\n     isMove = true\n   })\n   // 绑定为元素本身，超出范围时，元素就停止移动\n   // ball.addEventListener('mousemove', (e) => {\n   document.addEventListener('mousemove', (e) => {\n     if (!isMove) return\n     let x = e.pageX - ball.offsetWidth / 2\n     let y = e.pageY - ball.offsetHeight / 2\n     ball.style.left = `${x}px`\n     ball.style.top = `${y}px`\n   })\n   ball.addEventListener('mouseup', ()=> {\n     isMove = false\n   })\n")])])])])}),[],!1,null,null,null);t.default=a.exports}}]);