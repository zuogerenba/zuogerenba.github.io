<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>一、JSX的本质 | 邱模建的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/avatar.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.ab08ac82.js" as="script"><link rel="preload" href="/assets/js/2.fe6dca74.js" as="script"><link rel="preload" href="/assets/js/6.f3fdc29d.js" as="script"><link rel="prefetch" href="/assets/js/10.44ca1bce.js"><link rel="prefetch" href="/assets/js/100.ff4a7272.js"><link rel="prefetch" href="/assets/js/101.4f5b1dfc.js"><link rel="prefetch" href="/assets/js/102.4b0b16e2.js"><link rel="prefetch" href="/assets/js/103.cb5f3e5c.js"><link rel="prefetch" href="/assets/js/104.b1811512.js"><link rel="prefetch" href="/assets/js/105.aa082472.js"><link rel="prefetch" href="/assets/js/106.91d2c8b0.js"><link rel="prefetch" href="/assets/js/107.3dea83b1.js"><link rel="prefetch" href="/assets/js/108.236a9cb3.js"><link rel="prefetch" href="/assets/js/109.8deba790.js"><link rel="prefetch" href="/assets/js/11.0dcd522a.js"><link rel="prefetch" href="/assets/js/110.0e0d34b4.js"><link rel="prefetch" href="/assets/js/111.0b565b05.js"><link rel="prefetch" href="/assets/js/112.cbd56ebc.js"><link rel="prefetch" href="/assets/js/113.6b220f73.js"><link rel="prefetch" href="/assets/js/114.84e8b596.js"><link rel="prefetch" href="/assets/js/115.9fc640b7.js"><link rel="prefetch" href="/assets/js/116.9a86f717.js"><link rel="prefetch" href="/assets/js/12.3ecee4d7.js"><link rel="prefetch" href="/assets/js/13.dc43ca20.js"><link rel="prefetch" href="/assets/js/14.2a807370.js"><link rel="prefetch" href="/assets/js/15.f2ae64fb.js"><link rel="prefetch" href="/assets/js/16.6cefb4c6.js"><link rel="prefetch" href="/assets/js/17.fba8bb8c.js"><link rel="prefetch" href="/assets/js/18.4d5bfc74.js"><link rel="prefetch" href="/assets/js/19.71623cf1.js"><link rel="prefetch" href="/assets/js/20.c1d3e8bd.js"><link rel="prefetch" href="/assets/js/21.89055cf4.js"><link rel="prefetch" href="/assets/js/22.4954c039.js"><link rel="prefetch" href="/assets/js/23.7c6f9745.js"><link rel="prefetch" href="/assets/js/24.4a9c9785.js"><link rel="prefetch" href="/assets/js/25.01027ef7.js"><link rel="prefetch" href="/assets/js/26.fb9ca95d.js"><link rel="prefetch" href="/assets/js/27.c0398869.js"><link rel="prefetch" href="/assets/js/28.d1b45b70.js"><link rel="prefetch" href="/assets/js/29.b42a2154.js"><link rel="prefetch" href="/assets/js/3.872ae142.js"><link rel="prefetch" href="/assets/js/30.fba61f27.js"><link rel="prefetch" href="/assets/js/31.4c8105b8.js"><link rel="prefetch" href="/assets/js/32.4390fdb1.js"><link rel="prefetch" href="/assets/js/33.fb22efe6.js"><link rel="prefetch" href="/assets/js/34.c790ec04.js"><link rel="prefetch" href="/assets/js/35.9559fbf9.js"><link rel="prefetch" href="/assets/js/36.bf93938b.js"><link rel="prefetch" href="/assets/js/37.49295366.js"><link rel="prefetch" href="/assets/js/38.90fc60b9.js"><link rel="prefetch" href="/assets/js/39.a18d83e7.js"><link rel="prefetch" href="/assets/js/4.08c03269.js"><link rel="prefetch" href="/assets/js/40.08bcd26b.js"><link rel="prefetch" href="/assets/js/41.9f70e821.js"><link rel="prefetch" href="/assets/js/42.b6f1d960.js"><link rel="prefetch" href="/assets/js/43.1bc00c36.js"><link rel="prefetch" href="/assets/js/44.89fd78b3.js"><link rel="prefetch" href="/assets/js/45.66558dce.js"><link rel="prefetch" href="/assets/js/46.6fb2cd24.js"><link rel="prefetch" href="/assets/js/47.d56d286f.js"><link rel="prefetch" href="/assets/js/48.35519a50.js"><link rel="prefetch" href="/assets/js/49.361857da.js"><link rel="prefetch" href="/assets/js/5.581fb300.js"><link rel="prefetch" href="/assets/js/50.d8fd2f28.js"><link rel="prefetch" href="/assets/js/51.92e3216f.js"><link rel="prefetch" href="/assets/js/52.fbc53d2a.js"><link rel="prefetch" href="/assets/js/53.eff022d3.js"><link rel="prefetch" href="/assets/js/54.634800e1.js"><link rel="prefetch" href="/assets/js/55.4c05b71c.js"><link rel="prefetch" href="/assets/js/56.4ab46734.js"><link rel="prefetch" href="/assets/js/57.ca27214f.js"><link rel="prefetch" href="/assets/js/58.d5242a99.js"><link rel="prefetch" href="/assets/js/59.0195abe1.js"><link rel="prefetch" href="/assets/js/60.f4553c6f.js"><link rel="prefetch" href="/assets/js/61.910c747c.js"><link rel="prefetch" href="/assets/js/62.11338b10.js"><link rel="prefetch" href="/assets/js/63.4db680cc.js"><link rel="prefetch" href="/assets/js/64.03470149.js"><link rel="prefetch" href="/assets/js/65.226aac33.js"><link rel="prefetch" href="/assets/js/66.ff242f26.js"><link rel="prefetch" href="/assets/js/67.4fa75535.js"><link rel="prefetch" href="/assets/js/68.8e397504.js"><link rel="prefetch" href="/assets/js/69.4e44158e.js"><link rel="prefetch" href="/assets/js/7.23c3e498.js"><link rel="prefetch" href="/assets/js/70.3c03822d.js"><link rel="prefetch" href="/assets/js/71.32e2c279.js"><link rel="prefetch" href="/assets/js/72.f5ac84af.js"><link rel="prefetch" href="/assets/js/73.64adb473.js"><link rel="prefetch" href="/assets/js/74.d7b550fe.js"><link rel="prefetch" href="/assets/js/75.be770e67.js"><link rel="prefetch" href="/assets/js/76.a7692266.js"><link rel="prefetch" href="/assets/js/77.fcafefb3.js"><link rel="prefetch" href="/assets/js/78.d1de0597.js"><link rel="prefetch" href="/assets/js/79.c4cbe623.js"><link rel="prefetch" href="/assets/js/8.561638da.js"><link rel="prefetch" href="/assets/js/80.45ff8ec4.js"><link rel="prefetch" href="/assets/js/81.a7006a2e.js"><link rel="prefetch" href="/assets/js/82.16b4b62c.js"><link rel="prefetch" href="/assets/js/83.bde15b26.js"><link rel="prefetch" href="/assets/js/84.9555f7e8.js"><link rel="prefetch" href="/assets/js/85.342c98a2.js"><link rel="prefetch" href="/assets/js/86.3dc6bedd.js"><link rel="prefetch" href="/assets/js/87.1ed60d78.js"><link rel="prefetch" href="/assets/js/88.a97aa37d.js"><link rel="prefetch" href="/assets/js/89.40d81536.js"><link rel="prefetch" href="/assets/js/9.4a2b0589.js"><link rel="prefetch" href="/assets/js/90.b0be239c.js"><link rel="prefetch" href="/assets/js/91.d1b597cd.js"><link rel="prefetch" href="/assets/js/92.0c0131a5.js"><link rel="prefetch" href="/assets/js/93.6a045b51.js"><link rel="prefetch" href="/assets/js/94.b9a23713.js"><link rel="prefetch" href="/assets/js/95.581789a6.js"><link rel="prefetch" href="/assets/js/96.cef1bc26.js"><link rel="prefetch" href="/assets/js/97.82bec4e2.js"><link rel="prefetch" href="/assets/js/98.e88e6b38.js"><link rel="prefetch" href="/assets/js/99.1c62b889.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.png" alt="邱模建的博客" class="logo"> <span class="site-name can-hide">邱模建的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/React/React学习笔记.html" class="sidebar-link">学习笔记</a></li><li><a href="/pages/React/redux学习.html" class="sidebar-link">Redux学习</a></li><li><a href="/pages/React/源码阅读.html" class="active sidebar-link">源码阅读</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#一、jsx的本质" class="sidebar-link">一、JSX的本质</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#_1-jsx的语法糖" class="sidebar-link">1.JSX的语法糖</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#_2-源码" class="sidebar-link">2.源码</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#_3-createelement源码" class="sidebar-link">3.createElement源码</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#二、setstate同步异步判断" class="sidebar-link">二、setState同步异步判断</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#初始判断" class="sidebar-link">初始判断</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#updater" class="sidebar-link">updater</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#三、setstate数据合成" class="sidebar-link">三、setState数据合成</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#processupdatequeue里面的getstatefromupdate函数" class="sidebar-link">processUpdateQueue里面的getStateFromUpdate函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#四、setstate本身合成" class="sidebar-link">四、setState本身合成</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#五、scu、memo、pure" class="sidebar-link">五、SCU、Memo、Pure</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#scu" class="sidebar-link">SCU</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#purecomponent" class="sidebar-link">PureComponent</a></li><li class="sidebar-sub-header"><a href="/pages/React/源码阅读.html#浅层比较函数" class="sidebar-link">浅层比较函数</a></li></ul></li></ul></li><li><a href="/pages/React/Fiber学习.html" class="sidebar-link">Fiber学习</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VUE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NODE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIT教程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实习遇到的问题及成长</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>腾讯工作的思考与总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>琐碎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="一、jsx的本质"><a href="#一、jsx的本质" class="header-anchor">#</a> 一、JSX的本质</h2> <h3 id="_1-jsx的语法糖"><a href="#_1-jsx的语法糖" class="header-anchor">#</a> 1.JSX的语法糖</h3> <ul><li>本质是React.createElement的语法糖</li> <li>所有的JSX最终都会被转成React.createElement的函数调用。</li></ul> <div class="language-jsx extra-class"><pre class="language-jsx"><code><span class="token keyword">const</span> message1 <span class="token operator">=</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">&gt;</span></span><span class="token plain-text">Hello React</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span>
<span class="token keyword">const</span> message2 <span class="token operator">=</span> React<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span>标签，属性，子组件<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_2-源码"><a href="#_2-源码" class="header-anchor">#</a> 2.源码</h3> <p>目录：packages/react/index.js</p> <p>判断环境：开发环境就会有更多的报错提示</p> <p><img src="data:image/png;base64,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" alt="环境"></p> <p>报错：</p> <ul><li>你是否忘记导出的你的组件</li></ul> <p><img src="/assets/img/CreateElement_2.f6fece84.png" alt="环境1"></p> <h3 id="_3-createelement源码"><a href="#_3-createelement源码" class="header-anchor">#</a> <strong>3.createElement源码</strong></h3> <h4 id="判断环境部分"><a href="#判断环境部分" class="header-anchor">#</a> 判断环境部分</h4> <ul><li>export function createElement(type, config, children)</li> <li>参数分别是tag类型（组件），属性，子组件</li></ul> <p>疑问：children是复数，但是这里只传一个参数，那么怎么传复数形式呢？</p> <h4 id="取出config属性部分"><a href="#取出config属性部分" class="header-anchor">#</a> 取出config属性部分</h4> <ul><li>这一步将config里面的属性值取出来。</li> <li>判断有没有key，ref，self，source这些属性，取出来保存在当前函数内部。</li> <li>然后再用for in 遍历将config里面的propName保存在函数内部的propName里面。</li></ul> <p><img src="/assets/img/CreateElement_3.60ca1e07.png" alt="环境1"></p> <h4 id="判断children部分"><a href="#判断children部分" class="header-anchor">#</a> 判断children部分</h4> <ul><li>孩子的长度为arguments.length - 2</li> <li>长度不同做不同的事，长度1的话props.children = children; 长度&gt;1,创建数组，把每个child存入数组。props.children = childrenArray；</li></ul> <p><img src="/assets/img/CreateElement_4.8ebda1af.png" alt="环境1"></p> <h4 id="type部分"><a href="#type部分" class="header-anchor">#</a> type部分</h4> <h4 id="返回部分"><a href="#返回部分" class="header-anchor">#</a> 返回部分</h4> <ul><li>返回的是ReactElement对象,最终创建的是ReactElement对象。</li> <li>因为React利用ReactElement对象组成了一个JavaScript的对象树。</li> <li>这个对象树就是大名鼎鼎的 <strong>虚拟DOM</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token keyword">return</span> <span class="token function">ReactElement</span><span class="token punctuation">(</span>
    type<span class="token punctuation">,</span>
    key<span class="token punctuation">,</span>
    ref<span class="token punctuation">,</span>
    self<span class="token punctuation">,</span>
    source<span class="token punctuation">,</span>
    ReactCurrentOwner<span class="token punctuation">.</span>current<span class="token punctuation">,</span>
    props<span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="二、setstate同步异步判断"><a href="#二、setstate同步异步判断" class="header-anchor">#</a> 二、setState同步异步判断</h2> <p>说明：setState有些时候是同步的，有些时候是异步的。多次累加只会作用一次，内部都是怎么做的？</p> <h3 id="初始判断"><a href="#初始判断" class="header-anchor">#</a> 初始判断</h3> <ul><li>partialState要么是对象，要么是函数，要么是null，必须是其中一个。</li> <li>不是三个其中一个就会报出警告</li> <li>实际执行的是<strong>updater.enqueueSetState</strong></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token class-name">Component</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">setState</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">partialState<span class="token punctuation">,</span> callback</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">invariant</span><span class="token punctuation">(</span>
    <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">||</span>
      <span class="token keyword">typeof</span> partialState <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">||</span>
      partialState <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token string">'setState(...): takes an object of state variables to update or a '</span> <span class="token operator">+</span>
      <span class="token string">'function which returns an object of state variables.'</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>updater<span class="token punctuation">.</span><span class="token function">enqueueSetState</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> partialState<span class="token punctuation">,</span> callback<span class="token punctuation">,</span> <span class="token string">'setState'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="updater"><a href="#updater" class="header-anchor">#</a> updater</h3> <h4 id="enqueuesetstate"><a href="#enqueuesetstate" class="header-anchor">#</a> enqueueSetState</h4> <ul><li>上面提到的<strong>updater</strong>又是什么？它是属于<strong>react-reconciler</strong>里面的。他会把更新内容渲染到真实DOM上。</li> <li>每个类组件都有updater，对应的是<strong>classComponentUpdater</strong>,setState就是把里面的enqueueSetState取出来调用。</li></ul> <p><img src="/assets/img/setState_1.fd04fdf2.png" alt="setState"></p> <h4 id="enqueuesetstate里面的requestcurrenttimeforupdate"><a href="#enqueuesetstate里面的requestcurrenttimeforupdate" class="header-anchor">#</a> <strong>enqueueSetState里面的requestCurrentTimeForUpdate</strong></h4> <ul><li>里面关键的一点就是在<strong>requestCurrentTimeForUpdate</strong>这个函数里面，同步异步就是根据该函数里面的上下文决定的，生命周期和React合成事件/setTimeout和原生DOM事件 这两个渲染上下文是不一样的。</li> <li>根据不同上下文，返回一个不同时间currentTime</li></ul> <p><img src="/assets/img/setState_2.3e12ebf7.png" alt="setState"></p> <h4 id="enqueuesetstate里面的computeexpirationforfiber"><a href="#enqueuesetstate里面的computeexpirationforfiber" class="header-anchor">#</a> enqueueSetState里面的computeExpirationForFiber</h4> <ul><li>计算过期时间，把currentTime传进去，再把fiber(当前组件实例)传进去。</li> <li>在computeExpirationForFiber函数内部把fiber的mode取出来，去判断返回的是同步还是批量处理</li> <li>批处理就是异步的意思</li></ul> <p><img src="/assets/img/setState_3.b2b95c55.png" alt="setState"></p> <h4 id="enqueuesetstate里面的createupdate"><a href="#enqueuesetstate里面的createupdate" class="header-anchor">#</a> enqueueSetState里面的createUpdate</h4> <ul><li>上面计算过期时间的返回值，作为参数传给createUpdate，生成update(最上面源码)</li></ul> <h2 id="三、setstate数据合成"><a href="#三、setstate数据合成" class="header-anchor">#</a> 三、setState数据合成</h2> <p>在setState修改数据时，state里面有多个属性，但修改只需要传入被修改的属性即可，怎么做到的呢？</p> <h3 id="processupdatequeue里面的getstatefromupdate函数"><a href="#processupdatequeue里面的getstatefromupdate函数" class="header-anchor">#</a> processUpdateQueue里面的getStateFromUpdate函数</h3> <ul><li>获取到更新的state放入新的state</li></ul> <div class="language- extra-class"><pre class="language-text"><code>// Process this update.
  newState = getStateFromUpdate(
    workInProgress,
    queue,
    update,
    newState,
    props,
    instance,
  );
  
该函数返回
  return Object.assign({}, prevState, partialState);
原因是做了一个浅拷贝
</code></pre></div><h2 id="四、setstate本身合成"><a href="#四、setstate本身合成" class="header-anchor">#</a> 四、setState本身合成</h2> <p>一个合成事件里面有多个setState时，都只会进行一次，因为源码内部，进行了do...while...循环，do...while里面把进行了多次的setState，getStateFromUpdate就是在这个循环里面执行，每一次都是将前一次的state和下一次的state进行合并。</p> <p>因为prevState一定是每一次都是do...while循环之前的值，所以多次更新只会执行最后一次。</p> <p><img src="/assets/img/setState_4.89853382.png" alt="setState"></p> <p><img src="data:image/png;base64,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" alt="setState"></p> <p>但是如果想要他进行多次累加，就可以把setState里面的参数换为函数。</p> <h2 id="五、scu、memo、pure"><a href="#五、scu、memo、pure" class="header-anchor">#</a> 五、SCU、Memo、Pure</h2> <blockquote><p>父组件里面嵌套子组件，当父组件重新render时，里面所有组件都会进行重新渲染，这是非常没必要的，可以通过SCU（类特有）手动判断是否需要更新，Memo包裹函数组件，继承PureComponent去自动判断是否更新。</p></blockquote> <h3 id="scu"><a href="#scu" class="header-anchor">#</a> SCU</h3> <p><img src="/assets/img/SCU_1.8d82ebf7.png" alt="SCU"></p> <h3 id="purecomponent"><a href="#purecomponent" class="header-anchor">#</a> PureComponent</h3> <ul><li>继承这个组件时，他就会把isPureReactComponent = true</li> <li>那么SCU里面的浅层比较将会被调用</li></ul> <p><img src="/assets/img/SCU.b968437f.png" alt="SCU"></p> <h3 id="浅层比较函数"><a href="#浅层比较函数" class="header-anchor">#</a> 浅层比较函数</h3> <ul><li>里面比较的是新旧props和新旧state</li> <li>pureComponent默认返回的是false，不更新(render不调用)</li> <li>只要浅层比较就行了，深层比较浪费性能。</li></ul> <p><img src="/assets/img/SCU_2.0f8aaa14.png" alt="SCU"></p> <ul><li></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">12/25/2020, 9:20:27 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/React/redux学习.html" class="prev">
        Redux学习
      </a></span> <span class="next"><a href="/pages/React/Fiber学习.html">
        Fiber学习
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ab08ac82.js" defer></script><script src="/assets/js/2.fe6dca74.js" defer></script><script src="/assets/js/6.f3fdc29d.js" defer></script>
  </body>
</html>
