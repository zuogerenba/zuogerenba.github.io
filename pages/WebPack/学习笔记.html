<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>二、webpack配置文件 | 邱模建的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/avatar.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.ab08ac82.js" as="script"><link rel="preload" href="/assets/js/2.fe6dca74.js" as="script"><link rel="preload" href="/assets/js/4.08c03269.js" as="script"><link rel="prefetch" href="/assets/js/10.44ca1bce.js"><link rel="prefetch" href="/assets/js/100.ff4a7272.js"><link rel="prefetch" href="/assets/js/101.4f5b1dfc.js"><link rel="prefetch" href="/assets/js/102.4b0b16e2.js"><link rel="prefetch" href="/assets/js/103.cb5f3e5c.js"><link rel="prefetch" href="/assets/js/104.b1811512.js"><link rel="prefetch" href="/assets/js/105.aa082472.js"><link rel="prefetch" href="/assets/js/106.91d2c8b0.js"><link rel="prefetch" href="/assets/js/107.3dea83b1.js"><link rel="prefetch" href="/assets/js/108.236a9cb3.js"><link rel="prefetch" href="/assets/js/109.8deba790.js"><link rel="prefetch" href="/assets/js/11.0dcd522a.js"><link rel="prefetch" href="/assets/js/110.0e0d34b4.js"><link rel="prefetch" href="/assets/js/111.0b565b05.js"><link rel="prefetch" href="/assets/js/112.cbd56ebc.js"><link rel="prefetch" href="/assets/js/113.6b220f73.js"><link rel="prefetch" href="/assets/js/114.84e8b596.js"><link rel="prefetch" href="/assets/js/115.9fc640b7.js"><link rel="prefetch" href="/assets/js/116.9a86f717.js"><link rel="prefetch" href="/assets/js/12.3ecee4d7.js"><link rel="prefetch" href="/assets/js/13.dc43ca20.js"><link rel="prefetch" href="/assets/js/14.2a807370.js"><link rel="prefetch" href="/assets/js/15.f2ae64fb.js"><link rel="prefetch" href="/assets/js/16.6cefb4c6.js"><link rel="prefetch" href="/assets/js/17.fba8bb8c.js"><link rel="prefetch" href="/assets/js/18.4d5bfc74.js"><link rel="prefetch" href="/assets/js/19.71623cf1.js"><link rel="prefetch" href="/assets/js/20.c1d3e8bd.js"><link rel="prefetch" href="/assets/js/21.89055cf4.js"><link rel="prefetch" href="/assets/js/22.4954c039.js"><link rel="prefetch" href="/assets/js/23.7c6f9745.js"><link rel="prefetch" href="/assets/js/24.4a9c9785.js"><link rel="prefetch" href="/assets/js/25.01027ef7.js"><link rel="prefetch" href="/assets/js/26.fb9ca95d.js"><link rel="prefetch" href="/assets/js/27.c0398869.js"><link rel="prefetch" href="/assets/js/28.d1b45b70.js"><link rel="prefetch" href="/assets/js/29.b42a2154.js"><link rel="prefetch" href="/assets/js/3.872ae142.js"><link rel="prefetch" href="/assets/js/30.fba61f27.js"><link rel="prefetch" href="/assets/js/31.4c8105b8.js"><link rel="prefetch" href="/assets/js/32.4390fdb1.js"><link rel="prefetch" href="/assets/js/33.fb22efe6.js"><link rel="prefetch" href="/assets/js/34.c790ec04.js"><link rel="prefetch" href="/assets/js/35.9559fbf9.js"><link rel="prefetch" href="/assets/js/36.bf93938b.js"><link rel="prefetch" href="/assets/js/37.49295366.js"><link rel="prefetch" href="/assets/js/38.90fc60b9.js"><link rel="prefetch" href="/assets/js/39.a18d83e7.js"><link rel="prefetch" href="/assets/js/40.08bcd26b.js"><link rel="prefetch" href="/assets/js/41.9f70e821.js"><link rel="prefetch" href="/assets/js/42.b6f1d960.js"><link rel="prefetch" href="/assets/js/43.1bc00c36.js"><link rel="prefetch" href="/assets/js/44.89fd78b3.js"><link rel="prefetch" href="/assets/js/45.66558dce.js"><link rel="prefetch" href="/assets/js/46.6fb2cd24.js"><link rel="prefetch" href="/assets/js/47.d56d286f.js"><link rel="prefetch" href="/assets/js/48.35519a50.js"><link rel="prefetch" href="/assets/js/49.361857da.js"><link rel="prefetch" href="/assets/js/5.581fb300.js"><link rel="prefetch" href="/assets/js/50.d8fd2f28.js"><link rel="prefetch" href="/assets/js/51.92e3216f.js"><link rel="prefetch" href="/assets/js/52.fbc53d2a.js"><link rel="prefetch" href="/assets/js/53.eff022d3.js"><link rel="prefetch" href="/assets/js/54.634800e1.js"><link rel="prefetch" href="/assets/js/55.4c05b71c.js"><link rel="prefetch" href="/assets/js/56.4ab46734.js"><link rel="prefetch" href="/assets/js/57.ca27214f.js"><link rel="prefetch" href="/assets/js/58.d5242a99.js"><link rel="prefetch" href="/assets/js/59.0195abe1.js"><link rel="prefetch" href="/assets/js/6.f3fdc29d.js"><link rel="prefetch" href="/assets/js/60.f4553c6f.js"><link rel="prefetch" href="/assets/js/61.910c747c.js"><link rel="prefetch" href="/assets/js/62.11338b10.js"><link rel="prefetch" href="/assets/js/63.4db680cc.js"><link rel="prefetch" href="/assets/js/64.03470149.js"><link rel="prefetch" href="/assets/js/65.226aac33.js"><link rel="prefetch" href="/assets/js/66.ff242f26.js"><link rel="prefetch" href="/assets/js/67.4fa75535.js"><link rel="prefetch" href="/assets/js/68.8e397504.js"><link rel="prefetch" href="/assets/js/69.4e44158e.js"><link rel="prefetch" href="/assets/js/7.23c3e498.js"><link rel="prefetch" href="/assets/js/70.3c03822d.js"><link rel="prefetch" href="/assets/js/71.32e2c279.js"><link rel="prefetch" href="/assets/js/72.f5ac84af.js"><link rel="prefetch" href="/assets/js/73.64adb473.js"><link rel="prefetch" href="/assets/js/74.d7b550fe.js"><link rel="prefetch" href="/assets/js/75.be770e67.js"><link rel="prefetch" href="/assets/js/76.a7692266.js"><link rel="prefetch" href="/assets/js/77.fcafefb3.js"><link rel="prefetch" href="/assets/js/78.d1de0597.js"><link rel="prefetch" href="/assets/js/79.c4cbe623.js"><link rel="prefetch" href="/assets/js/8.561638da.js"><link rel="prefetch" href="/assets/js/80.45ff8ec4.js"><link rel="prefetch" href="/assets/js/81.a7006a2e.js"><link rel="prefetch" href="/assets/js/82.16b4b62c.js"><link rel="prefetch" href="/assets/js/83.bde15b26.js"><link rel="prefetch" href="/assets/js/84.9555f7e8.js"><link rel="prefetch" href="/assets/js/85.342c98a2.js"><link rel="prefetch" href="/assets/js/86.3dc6bedd.js"><link rel="prefetch" href="/assets/js/87.1ed60d78.js"><link rel="prefetch" href="/assets/js/88.a97aa37d.js"><link rel="prefetch" href="/assets/js/89.40d81536.js"><link rel="prefetch" href="/assets/js/9.4a2b0589.js"><link rel="prefetch" href="/assets/js/90.b0be239c.js"><link rel="prefetch" href="/assets/js/91.d1b597cd.js"><link rel="prefetch" href="/assets/js/92.0c0131a5.js"><link rel="prefetch" href="/assets/js/93.6a045b51.js"><link rel="prefetch" href="/assets/js/94.b9a23713.js"><link rel="prefetch" href="/assets/js/95.581789a6.js"><link rel="prefetch" href="/assets/js/96.cef1bc26.js"><link rel="prefetch" href="/assets/js/97.82bec4e2.js"><link rel="prefetch" href="/assets/js/98.e88e6b38.js"><link rel="prefetch" href="/assets/js/99.1c62b889.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.png" alt="邱模建的博客" class="logo"> <span class="site-name can-hide">邱模建的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算机网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VUE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NODE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Webpack</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/WebPack/学习笔记.html" class="active sidebar-link">Webpack学习笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#二、webpack配置文件" class="sidebar-link">二、webpack配置文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_1-打包过程" class="sidebar-link">1.打包过程</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_2-webpack依赖关系图" class="sidebar-link">2.webpack依赖关系图</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_3-代码编写案例" class="sidebar-link">3.代码编写案例</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_4-loader配置方式" class="sidebar-link">4.loader配置方式</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_5-如何处理less文件" class="sidebar-link">5.如何处理less文件？</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#二、第二章" class="sidebar-link">二、第二章</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_2-1postcss工具" class="sidebar-link">2.1PostCSS工具</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_2-2mode配置" class="sidebar-link">2.2mode配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#三、处理其他资源" class="sidebar-link">三、处理其他资源</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_3-1file-loader-处理其他文件资源loader" class="sidebar-link">3.1file-loader（处理其他文件资源loader）</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_3-2url-loader" class="sidebar-link">3.2url-loader</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_3-3-在webpack5中加载其他资源" class="sidebar-link">3.3 在webpack5中加载其他资源</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_3-4加载字体文件" class="sidebar-link">3.4加载字体文件</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#四、plugin" class="sidebar-link">四、Plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_4-1plugin和loader区别" class="sidebar-link">4.1Plugin和Loader区别</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_4-2-htmlwebpackplugin" class="sidebar-link">4.2 HtmlwebpackPlugin</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_4-3定义全局常量defineplugin插件" class="sidebar-link">4.3定义全局常量DefinePlugin插件</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_4-4copywebpackplugin" class="sidebar-link">4.4CopyWebpackPlugin</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#五、模块化原理和source-map" class="sidebar-link">五、模块化原理和source-map</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_5-1webpack模块化原理" class="sidebar-link">5.1webpack模块化原理</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_5-2认识source-map" class="sidebar-link">5.2认识source-map</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#六、babel深入解析" class="sidebar-link">六、Babel深入解析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_6-1babel简单介绍" class="sidebar-link">6.1Babel简单介绍</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_6-2babel使用" class="sidebar-link">6.2Babel使用</a></li><li class="sidebar-sub-header"><a href="/pages/WebPack/学习笔记.html#_6-3babel底层原理" class="sidebar-link">6.3babel底层原理</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIT教程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实习遇到的问题及成长</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>腾讯工作的思考与总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>琐碎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="二、webpack配置文件"><a href="#二、webpack配置文件" class="header-anchor">#</a> 二、webpack配置文件</h2> <h3 id="_1-打包过程"><a href="#_1-打包过程" class="header-anchor">#</a> 1.打包过程</h3> <p><strong>指定入口出口打包方式一：命令</strong></p> <p><code>webpack --ebtry ./src/main.js --output-path ./build</code></p> <p><strong>指定出口入口方式二：配置文件（重点）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// webpack.config.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  entry<span class="token operator">:</span> <span class="token string">'./src/main.js'</span><span class="token punctuation">,</span>
  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;boundle.js&quot;</span><span class="token punctuation">,</span>
    <span class="token comment">// 必须是绝对路径</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./build&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>假如文件名不是webpack.config.js</strong></p> <ul><li>那就没有办法打包成功了，怎么办？</li> <li>因为执行<code>webpack</code>命令时，会去查找<code>webpack.config.js</code>这个文件执行</li> <li>解决：
<ul><li>在配置文件里面修改build指令的配置参数</li></ul></li></ul> <p><img src="/assets/img/webpack_01.c1127e3e.png" alt=""></p> <h3 id="_2-webpack依赖关系图"><a href="#_2-webpack依赖关系图" class="header-anchor">#</a> 2.webpack依赖关系图</h3> <ul><li>webpack到底是如何对我们的项目进行打包的呢？
<ul><li>事实上webpack处理应用程序时，根据命令或已配置的文件找到入口</li> <li>入口开始，生成一个 <strong>依赖关系图</strong>，这个依赖关系图会包含应用程序中所需的所有模块（js，css，图片，字体）</li> <li>遍历图结构，打包一个个模块（根据文件的不同使用不同的loader来解析）</li></ul></li> <li>上述的例子：
<ul><li>例子一：安装了某个第三方库<code>axios</code>，但是并没有使用，所以打包不会带进去，打包后总体积不会增大。</li> <li>例子二：项目中创建的文件，没有被引用，最后打包不会在依赖图上，所以体积也不会增大。</li> <li>例子三：假如有个js文件里面有函数，js确实被引用了，但是函数未被执行，函数也不会被打包。
<ul><li>涉及到tree shaking</li></ul></li></ul></li></ul> <h3 id="_3-代码编写案例"><a href="#_3-代码编写案例" class="header-anchor">#</a> 3.代码编写案例</h3> <ul><li><p>写了个css，导入到文件，最后把它打包，最后会报错，原因是缺少加载css的loader</p></li> <li><p>loader是什么呢？</p> <ul><li>用于对模块的源代码进行替换</li> <li>css文件也可以看成是一个模块，通过 <strong>import</strong>来加载这个模块</li> <li>在加载这个模块时，webpack其实并不知道如何对其进行加载，我们必须制定对应的loader来完成这个功能</li></ul></li> <li><p>那么什么样的loader可以加载css呢？</p> <ul><li>这个常用的loader最常用的是css-loader</li> <li>安装：<code>npm install css-loader -D</code></li></ul></li> <li><p>css-loader的三种使用方案：</p> <ul><li>内联</li></ul> <img src="/assets/img/css_loader.12b1999b.png" alt="css-loader" style="zoom:50%;"> <ul><li>CLI方式（webpack5中不再使用）</li> <li>配置方式</li></ul></li> <li><p>有<code>css-loader</code>表示正常处理解析了css文件，但是解析之后的css文件没有插入到页面上。</p></li> <li><p>想要插入style，就需要使用<code>style-loader</code></p> <ul><li><code>npm i style-loader -D</code></li> <li>use: [&quot;style-loader&quot;]</li> <li>style-loader的原理就是在document.createElement(style)创建了个样式表</li></ul></li> <li><p>注意：webpack处理loader的时候是从下往上的，从右往左的</p></li></ul> <h3 id="_4-loader配置方式"><a href="#_4-loader配置方式" class="header-anchor">#</a> 4.loader配置方式</h3> <ul><li>module.rules的配置如下：</li> <li>rules属性对应的值是一个数组 <strong>[Rule]</strong></li> <li>数组中存放的时 一个个的Rule，Rule是一个对象，对象中可以设置多个属性：
<ul><li>test属性：用于对resource（资源）进行匹配，通常设置成正则表达式</li> <li>use属性：对应的值是一个数组：<strong>[UseEntry]</strong>，也是一个对象，有两个key
<ul><li>loader：指明要用哪些loader</li> <li>options：可选属性，值可以使字符串或对象，值会被传入到loader中</li></ul></li> <li><code>use:[&quot;css-loader&quot;]</code>相当于键值对的写法</li></ul></li></ul> <img src="/assets/img/rules.030731cc.png" alt="rules" style="zoom:50%;"> <h3 id="_5-如何处理less文件"><a href="#_5-如何处理less文件" class="header-anchor">#</a> 5.如何处理less文件？</h3> <h4 id="_5-1安装相关工具"><a href="#_5-1安装相关工具" class="header-anchor">#</a> 5.1安装相关工具</h4> <ul><li><p>肯定是要把less转换成css的，需要安装less工具 <code>npm i less -D</code></p></li> <li><p>然后 <code>npx less ./src/css/component.less &gt; component.css</code>即可转换成正常css文件</p></li> <li><p>但是在正常开发中需要同时安装 <strong>less</strong> 和 <strong>less-loader</strong> <code>npm i less less-loader -D</code></p></li></ul> <h4 id="_5-2配置相关rule-less"><a href="#_5-2配置相关rule-less" class="header-anchor">#</a> 5.2配置相关rule（less）</h4> <img src="/assets/img/less.24858175.png" alt="less" style="zoom:50%;"> <h2 id="二、第二章"><a href="#二、第二章" class="header-anchor">#</a> 二、第二章</h2> <h3 id="_2-1postcss工具"><a href="#_2-1postcss工具" class="header-anchor">#</a> 2.1PostCSS工具</h3> <h4 id="_2-1-1初识postcss"><a href="#_2-1-1初识postcss" class="header-anchor">#</a> 2.1.1初识PostCSS</h4> <ul><li>什么是PostCss？
<ul><li>PostCss是通过<strong>JavaScript</strong>来<strong>转换样式</strong>的工具</li> <li>这个工具可以帮助我们进行<strong>CSS的转换和适配</strong>，比如<strong>自动添加浏览器前缀</strong>，<strong>css样式重置</strong> <ul><li>需要添加前缀的样式网站是：<code>autoprefixer.github.io</code></li></ul></li> <li>实现这些功能，都需要借助于PostCSS对应的插件</li></ul></li> <li>如何使用PostCSS呢？主要就是两个步骤：
<ul><li>先查找PostCSS在构建工具的扩展，比如webpack中的postcss-loader；</li> <li>选择可以添加你需要的PostCSS相关插件</li></ul></li></ul> <h4 id="_2-1-2命令行使用postcss"><a href="#_2-1-2命令行使用postcss" class="header-anchor">#</a> 2.1.2命令行使用postcss</h4> <ul><li>我们可以直接在终端中使用PostCSS，只需要单独安装一个工具<code>postcss-cli</code> <ul><li><code>npm i postcss -D</code></li> <li><code>npm i postcss-cli -D</code> 目的是为了能在命令行中使用PostCSS</li></ul></li> <li>举个栗子：现在有个css文件里面有些样式，但是这些样式是需要加上浏览器前缀的
<ul><li>现在这些样式是不行的，需要进行处理才能正常运行</li> <li><code>npx postcss -o result.css ./src/css/test.css</code></li></ul></li></ul> <p><img src="/assets/img/testcss.941b4d41.png" alt="需要添加前缀的栗子"></p> <ul><li>执行完上面命令行发现是有输出的，但是并没有添加前缀，是因为没有添加插件</li></ul> <p><img src="/assets/img/resultcss1.f72c7bfd.png" alt=""></p> <ul><li>想要自动添加前缀需要安装什么插件呢？
<ul><li><code>npm i autoprefixer -D</code></li> <li>然后再执行的时候也需要告诉这次你要使用的插件
<ul><li><code>npx postcss --use autoprefixer -o result.css ./src/css/test.css</code></li></ul></li> <li>大功告成</li></ul></li></ul> <p><img src="/assets/img/resultcss2.463af45e.png" alt=""></p> <h4 id="_2-1-3在项目-webpack-中使用postcss"><a href="#_2-1-3在项目-webpack-中使用postcss" class="header-anchor">#</a> 2.1.3在项目（webpack）中使用postcss</h4> <ul><li>大致流程就是我们需要把自己写的css通过postcss转换成有前缀的result.css</li> <li>然后再交给css-loader处理，渲染</li> <li>首先需要安装 <strong>postcss-loader</strong> <ul><li><code>npm i postcss-loader -D</code></li></ul></li> <li>然后需要在css-loader之前通过postcss-loader处理
<ul><li>但要注意的是要使用对应的插件，上面也提到过</li></ul></li></ul> <p><img src="/assets/img/usepostcss.59e91ea6.png" alt="使用postcss"></p> <p><strong>使用之前</strong></p> <p><img src="/assets/img/before_postcss.4b92d8e2.png" alt=""></p> <p><strong>使用之后</strong></p> <p><img src="/assets/img/after_postcss.67e1abdd.png" alt=""></p> <h4 id="_2-1-4postcss-preset-env的使用"><a href="#_2-1-4postcss-preset-env的使用" class="header-anchor">#</a> 2.1.4postcss-preset-env的使用</h4> <ul><li>上面介绍了 <strong>autoprefixer</strong>，但是很多项目中使用更多的是 <strong>postcss-preset-env</strong></li> <li>他的作用也是转换 <strong>现代css特性</strong>，让这个css可以被大多数浏览器识别</li> <li>举个栗子：
<ul><li>我们一般写16进制颜色的时候写6位：如 <code>#123456</code>, 代表着rgb</li> <li>但是我们写成8位 <code>#12345678</code> ,代表着 rgba，后面两个代表透明度</li> <li>但这个8位最新的浏览器确实可以解析，但是旧浏览器无法解析，而且上面使用的 <strong>autoprefixer</strong>也不会帮我们转换</li> <li>那怎么办? 答案就是使用 <strong>postcss-preset-env</strong></li></ul></li> <li>使用步骤：
<ul><li>安装： <code>npm i postcss-preset-env -D</code></li> <li>在postcss-loader中使用该插件</li></ul></li> <li>使用之前效果：</li></ul> <p><img src="/assets/img/before_postcss_preset_env.4ed51f7a.png" alt=""></p> <ul><li>使用之后效果：</li></ul> <p><img src="/assets/img/after_postcss_preset_env.534c035e.png" alt=""></p> <ul><li>这个css新特性就可以转换成大多数浏览器可识别的代码了</li></ul> <h4 id="_2-1-5配置相关优化"><a href="#_2-1-5配置相关优化" class="header-anchor">#</a> 2.1.5配置相关优化</h4> <ul><li>在普通css中这样处理需要写一大推代码，项目中又有less有需要写一遍相同的代码，有没有办法优化？</li> <li>将整个代码块直接改成像<code>css-loader</code>一样，写个字符串</li> <li>把相关的插件依赖写到<code>postcss.config.js</code>里面，名字一定是要这个，不然无法读取</li> <li>配置相关代码：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
    pluginL <span class="token punctuation">[</span>
    	<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'postcss-preset-env'</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-1-6-css-loader中importloaders属性"><a href="#_2-1-6-css-loader中importloaders属性" class="header-anchor">#</a> 2.1.6 css-loader中importLoaders属性</h4> <ul><li>有些场景是在一个样式中通过 <strong>@import</strong>引入另外一个css文件</li> <li>这种情况就不会被 <strong>postcss-loader</strong>处理，需要为 <strong>css-loader</strong>添加 <strong>importLoaders</strong>属性</li> <li>代码：</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
	loader<span class="token operator">:</span> <span class="token string">&quot;css-loader&quot;</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
		importLoaders<span class="token operator">:</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-2mode配置"><a href="#_2-2mode配置" class="header-anchor">#</a> 2.2mode配置</h3> <blockquote><p>mode有4中取值，默认是development，none，production等</p></blockquote> <h4 id="_2-2-1-development"><a href="#_2-2-1-development" class="header-anchor">#</a> 2.2.1 development</h4> <ul><li>代表了开发模式，打包的js代码没有进行丑化</li></ul> <h2 id="三、处理其他资源"><a href="#三、处理其他资源" class="header-anchor">#</a> 三、处理其他资源</h2> <ul><li>在日常开发中，一个项目会依赖js，css文件，也还会依赖图片资源</li></ul> <h3 id="_3-1file-loader-处理其他文件资源loader"><a href="#_3-1file-loader-处理其他文件资源loader" class="header-anchor">#</a> 3.1file-loader（处理其他文件资源loader）</h3> <ul><li>要处理jpj、png等格式图片，我们也要有对应的loader：<strong>file-loader</strong> <ul><li>file-loader的作用就是帮助我们处理 **import/require()**方式引入的一个文件资源，并且会将它放到我们输出的文件夹中；</li></ul></li></ul> <h4 id="_3-1-1使用file-loader"><a href="#_3-1-1使用file-loader" class="header-anchor">#</a> 3.1.1使用file-loader</h4> <p>安装：<code>npm i file-loader -D</code></p> <p>配置规则：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token string">&quot;file-loader&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p>这样就可以正常处理图片资源了。</p> <p><strong>但是考虑一个问题，打包之后的图片资源名称是经md4加密后的哈希值，不方便 和原资源名称对应起来，想要对应起来，怎么做？</strong></p> <h4 id="_3-1-2对打包生成的图片资源重命名"><a href="#_3-1-2对打包生成的图片资源重命名" class="header-anchor">#</a> 3.1.2对打包生成的图片资源重命名</h4> <ul><li>这种重命名的方式也是vue脚手架的配置</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[name].[hash:6].[ext]&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>    
</code></pre></div><p><strong>再来思考一个问题，图片资源有很多，打包后都默认放在build目录下，岂不是很不方便管理？想要把它放在对应的目录下，怎么做？</strong></p> <h4 id="_3-1-3打包后的文件放入对应的目录"><a href="#_3-1-3打包后的文件放入对应的目录" class="header-anchor">#</a> 3.1.3打包后的文件放入对应的目录</h4> <ul><li>在这里就是放在img目录下面，便于管理</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'file-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[name].[hash:6].[ext]&quot;</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">&quot;img&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-2url-loader"><a href="#_3-2url-loader" class="header-anchor">#</a> 3.2url-loader</h3> <ul><li><strong>url-loader</strong>和 <strong>file-loader</strong>工作方式是相似的，但是可以将较小的文件转成base64的URI</li></ul> <h4 id="_3-2-1-url-loader的使用"><a href="#_3-2-1-url-loader的使用" class="header-anchor">#</a> 3.2.1 url-loader的使用</h4> <p><strong>安装</strong> <code>npm i url-loader -D</code></p> <p><strong>配置代码</strong></p> <ul><li>不会像 <strong>file-loader</strong>一样去生成图片，而是转换成 <strong>base-64</strong>直接嵌入到js文件当中</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[name].[hash:6].[ext]&quot;</span><span class="token punctuation">,</span>
          outputPath<span class="token operator">:</span> <span class="token string">&quot;img&quot;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-2-2-url-loader带来的问题"><a href="#_3-2-2-url-loader带来的问题" class="header-anchor">#</a> 3.2.2 url-loader带来的问题</h4> <ul><li>一般比较适合于小文件的使用</li> <li>如果是大文件的话，把base64代码直接嵌入到js文件当中会造成文件过大</li> <li>意味着首次加载这个网页的时候需要花费更多的时间去下载这个js文件，造成白屏时间加长</li></ul> <h4 id="_3-2-3-怎么决定如何使用url-loader和file-loader"><a href="#_3-2-3-怎么决定如何使用url-loader和file-loader" class="header-anchor">#</a> 3.2.3 怎么决定如何使用url-loader和file-loader</h4> <ul><li>首先肯定的是，大文件使用file-loader按图片格式打包，小文件直接转成base64</li> <li>那么如何在配置文件中配置呢？</li></ul> <p><strong>配置文件</strong></p> <ul><li>该配置表示100kb作为一个分界点</li></ul> <div class="language-js extra-class"><pre class="language-js"><code> <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    use<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        loader<span class="token operator">:</span> <span class="token string">'url-loader'</span><span class="token punctuation">,</span>
        options<span class="token operator">:</span> <span class="token punctuation">{</span>
          name<span class="token operator">:</span> <span class="token string">&quot;[name].[hash:6].[ext]&quot;</span><span class="token punctuation">,</span>
          limit<span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span><span class="token number">1024</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_3-3-在webpack5中加载其他资源"><a href="#_3-3-在webpack5中加载其他资源" class="header-anchor">#</a> 3.3 在webpack5中加载其他资源</h3> <blockquote><p>在webpack5之前，会使用到 <strong>raw-loader</strong>、 <strong>url-loader</strong>、 <strong>file-loader</strong>。但是webpack5出来之后，我们可以直接使用资源模块类型（asset module type），来替代上面这些loader</p></blockquote> <p><strong>资源模块类型（asset module type）</strong>，通过添加4种薪的模块类型，来替换所有这些loader：</p> <ul><li><strong>asset/resource</strong> 发送单独的文件并导出URL。之前对应的是 <strong>file-loader</strong></li> <li><strong>asset/inline</strong> 导出一个资源的 data URI。之前通过使用 <strong>url-loader</strong>实现</li> <li><strong>asset/source</strong>导出资源的源代码。之前对应 <strong>raw-loader</strong></li> <li><strong>asset</strong>在导出一个data URI和发送一个单独的文件之间自动选择。之前通过 <strong>url-loader</strong>，并且配置资源体积限制实现。</li></ul> <h4 id="_3-3-1使用asset-module-type模块"><a href="#_3-3-1使用asset-module-type模块" class="header-anchor">#</a> 3.3.1使用asset module type模块</h4> <p><strong>安装</strong> ：无需安装，直接使用。</p> <p><strong>配置代码</strong> ：</p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span>
  <span class="token punctuation">}</span>
</code></pre></div><h4 id="_3-3-2-指定存放目录"><a href="#_3-3-2-指定存放目录" class="header-anchor">#</a> 3.3.2 指定存放目录</h4> <p><strong>方式一（在output中设置）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  output<span class="token operator">:</span> <span class="token punctuation">{</span>
    filename<span class="token operator">:</span> <span class="token string">&quot;boundle.js&quot;</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&quot;./build&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    assetModuleFilename<span class="token operator">:</span> <span class="token string">&quot;img/[name].[hash:6][ext]&quot;</span>  <span class="token comment">// 和file-loader不一样的地方，扩展名之前少一个.，模块帮我们加过了</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><p><strong>方式二（在generator属性中设置）</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
    generator<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;img/[name].[hash:6][ext]&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="_3-3-3-大图片和小图片采用不同type打包"><a href="#_3-3-3-大图片和小图片采用不同type打包" class="header-anchor">#</a> 3.3.3 大图片和小图片采用不同type打包</h4> <ul><li>就是把大图片带走打包，小图片就转换为base64嵌入行内；</li> <li>直接把 <strong>type类型设置为asset</strong></li> <li>设置parser属性中的maxSize</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    test<span class="token operator">:</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.(png|jpg|jpeg|gif|svg)$</span><span class="token regex-delimiter">/</span></span> <span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;asset&quot;</span><span class="token punctuation">,</span>  <span class="token comment">// 二选一打包 </span>
    generator<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;img/[name].[hash:6][ext]&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    parser<span class="token operator">:</span> <span class="token punctuation">{</span>
      dataUrlCondition<span class="token operator">:</span> <span class="token punctuation">{</span>
        maxSize<span class="token operator">:</span> <span class="token number">100</span> <span class="token operator">*</span><span class="token number">1024</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h3 id="_3-4加载字体文件"><a href="#_3-4加载字体文件" class="header-anchor">#</a> 3.4加载字体文件</h3> <blockquote><p>很多场景下都会使用到特殊的字体或者字体图标，就会引入很多字体相关的文件，这些文件的处理方式都是一样的。</p> <p>在webpack5之前也是通过file-loader来处理，但是在webpack5中就完全没必要了。</p></blockquote> <h4 id="_3-4-1使用asset-resource加载字体文件"><a href="#_3-4-1使用asset-resource加载字体文件" class="header-anchor">#</a> 3.4.1使用asset/resource加载字体文件</h4> <p><strong>安装</strong> ： 无需安装</p> <p><strong>代码配置</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token punctuation">{</span>
    test<span class="token operator">:</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">\.ttf|eot|woff2?$</span><span class="token regex-delimiter">/</span><span class="token regex-flags">i</span></span><span class="token punctuation">,</span>
    type<span class="token operator">:</span> <span class="token string">&quot;asset/resource&quot;</span><span class="token punctuation">,</span>
    generator<span class="token operator">:</span> <span class="token punctuation">{</span>
      filename<span class="token operator">:</span> <span class="token string">&quot;font/[name].[hash:6][ext]&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre></div><h2 id="四、plugin"><a href="#四、plugin" class="header-anchor">#</a> 四、Plugin</h2> <h3 id="_4-1plugin和loader区别"><a href="#_4-1plugin和loader区别" class="header-anchor">#</a> 4.1Plugin和Loader区别</h3> <blockquote><p>While loaders are used to transform certain types of modules, plugins can be leveraged to perform a wider range of tasks like bundle optimization, asset management and injection of environment variables.</p></blockquote> <ul><li>上面是webpack官方对plugin的描述，四级水平对其作个翻译：
<ul><li>Loader是用于特定的模块类型进行转换</li> <li>Plugin用于执行更加广泛的任务，比如打包优化、资源管理、环境变量注入等；</li></ul></li></ul> <p><strong>举个简单的栗子说明loader和plugin的作用</strong></p> <ul><li>css文件需要用css-loader去加载</li> <li>但是多个css文件需要合并成一个就需要使用插件</li></ul> <img src="/assets/img/plugin_demo.44a79e6c.png" alt="plugin栗子" style="zoom:75%;"> <p><strong>举个plugin使用的栗子</strong></p> <ul><li>不经过特殊处理的话，每次打包后的build文件夹，同名称的文件会被覆盖，但是多余文件不会被删除，</li> <li>想要它删除多余文件，也就是重新生成新的build文件夹，该怎么做？</li></ul> <p><strong>安装</strong> <code>npm i clean-webpack-plugin -D</code></p> <p><strong>导入</strong> <code>const { CleanWebpackPlugin } = require('clean-webpack-plugin');</code></p> <p><strong>配置代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="_4-2-htmlwebpackplugin"><a href="#_4-2-htmlwebpackplugin" class="header-anchor">#</a> 4.2 HtmlwebpackPlugin</h3> <ul><li>在build中自动生成html文件去引入我们的css文件</li></ul> <h4 id="_4-2-1-html插件的简单使用"><a href="#_4-2-1-html插件的简单使用" class="header-anchor">#</a> 4.2.1 html插件的简单使用</h4> <p><strong>安装</strong> <code>npm i html-wenpack-plugin -D</code></p> <p><strong>配置代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">CleanWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;coderqmj webpcak app&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>这样做的话就可以打包之后在build生成HTML文件，根据模板引擎生成。</li> <li>但是某些特除场景下提供的模板引擎无法满足需求，如vue中是需要把 组件挂载到<code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</code>中的</li> <li>所以我们还需要自定义模板引擎。</li></ul> <h4 id="_4-2-2自定义模板引擎"><a href="#_4-2-2自定义模板引擎" class="header-anchor">#</a> 4.2.2自定义模板引擎</h4> <ul><li>首先需要在根目录下创建 <strong>public</strong>目录，在里面创建 <strong>index.html</strong></li></ul> <p><strong>配置代码</strong></p> <div class="language-js extra-class"><pre class="language-js"><code>plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">HtmlWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        title<span class="token operator">:</span> <span class="token string">&quot;coderqmj webpcak app&quot;</span><span class="token punctuation">,</span>
        template<span class="token operator">:</span> <span class="token string">&quot;./public/index.html&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="_4-3定义全局常量defineplugin插件"><a href="#_4-3定义全局常量defineplugin插件" class="header-anchor">#</a> 4.3定义全局常量DefinePlugin插件</h3> <h4 id="_4-3-1使用defineplugin插件"><a href="#_4-3-1使用defineplugin插件" class="header-anchor">#</a> 4.3.1使用DefinePlugin插件</h4> <ul><li>由于这个是内置插件，无需安装，可以直接导入。</li></ul> <p><strong>配置代码</strong></p> <ul><li>改代码是配置网站图标的url全局变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> DefinePlugin <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webpack'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token keyword">new</span> <span class="token class-name">DefinePlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
       <span class="token constant">BASE_URL</span><span class="token operator">:</span> <span class="token string">'&quot;./&quot;'</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">]</span>
</code></pre></div><h3 id="_4-4copywebpackplugin"><a href="#_4-4copywebpackplugin" class="header-anchor">#</a> 4.4CopyWebpackPlugin</h3> <ul><li>在日常开发中，我们肯定是想要一些文件拷贝到我们dist文件夹里面</li> <li>例如，网站图标，public里面的东西</li> <li>那么我们就可以使用这个插件去实现</li></ul> <h4 id="_4-4-1-拷贝插件的使用"><a href="#_4-4-1-拷贝插件的使用" class="header-anchor">#</a> 4.4.1 拷贝插件的使用</h4> <p><strong>安装</strong> <code>npm i copy-webpack-plugin -D</code></p> <p><strong>配置</strong></p> <ul><li>这样做技能复制public下面的文件，也能忽略复制对应的文件</li> <li>需要注意的是，忽略配置的形式是 <code>**/文件名</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 导入</span>
<span class="token keyword">const</span> CopyWebpackPlugin <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'copy-webpack-plugin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token operator">...</span>
<span class="token keyword">new</span> <span class="token class-name">CopyWebpackPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  patterns<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">&quot;public&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 从这个地方复制，to是默认在build文件夹下面的</span>
      globOptions<span class="token operator">:</span> <span class="token punctuation">{</span>
        ignore<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;**/index.html&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;**/.DS_Store&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="五、模块化原理和source-map"><a href="#五、模块化原理和source-map" class="header-anchor">#</a> 五、模块化原理和source-map</h2> <h3 id="_5-1webpack模块化原理"><a href="#_5-1webpack模块化原理" class="header-anchor">#</a> 5.1webpack模块化原理</h3> <ul><li>webpack打包代码，允许使用各种各样的模块化，但最常使用的是CommonJS，ESModule，<strong>浏览器默认是不支持CommonJS的，但是查看打包后的代码有这个模块化，可以被执行</strong>，它是如何帮助我们代码中实现模块化的呢？</li> <li>我们可以来研究下它的原理，包括如下原理：
<ul><li>CommonJS模块化实现原理（浏览器默认不支持）</li> <li>ES Module实现原理</li> <li>CommonJS加载 ES Module的原理</li> <li>ES Module加载CommonJS的原理.</li></ul></li></ul> <h4 id="_5-1-1mode属性"><a href="#_5-1-1mode属性" class="header-anchor">#</a> 5.1.1mode属性</h4> <ul><li>设置了mode就相当于设置了一大推属性，如cache: true等等
<ul><li>默认是production这个值，代码是被压缩，丑化过的，体积变小</li> <li>如果是development，打包后的代码就不会压缩，可以阅读</li></ul></li></ul> <h4 id="_5-1-2commonjs模块化原理"><a href="#_5-1-2commonjs模块化原理" class="header-anchor">#</a> 5.1.2CommonJS模块化原理</h4> <ul><li>编写一个CommonJS模块化的文件，然后导出使用，发现可以在浏览器中使用，浏览器不是不支持吗？这是怎么做到的？</li></ul> <p><strong>观察打包前后的文件</strong> ：</p> <p><img src="data:image/png;base64,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AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMAFxDwDABMQ9AAATEPcAAExA3AMAMOH/A6yq/DuoGaarAAAAAElFTkSuQmCC" alt=""></p> <p><img src="/assets/img/CommonJS_02.79a65085.png" alt=""></p> <ul><li>可以看到，打包后的代码还是没啥阅读性，还有eval这东西，那怎么能再优化一下呢？
<ul><li>在webpack的配置文件里面加个devtool: &quot;source-map&quot;（默认是eval）即可，和正常代码差不多</li></ul></li></ul> <p><img src="/assets/img/sourcemap_01.db4f6a8d.png" alt=""></p> <h5 id="解析webpack实现commonjs模块化的原理"><a href="#解析webpack实现commonjs模块化的原理" class="header-anchor">#</a> <strong>解析webpack实现CommonJS模块化的原理</strong></h5> <ul><li>执行<code>webpack_require</code>函数， 参数是路径（路径：模块化 函数）这样的形式</li> <li>先查找缓存，有缓存就直接使用，没有就下一步赋值</li> <li>赋值：让缓存和module都指向同一个对象，方便同步修改</li> <li>开始去webpack_modules对象里读取该路径对应的函数，把对应的<code>dateFormat</code>放到module.exports.对象中，最后返回这个对象</li> <li>解构使用</li></ul> <p><img src="/assets/img/CommonJS_03.db827c7d.png" alt=""></p> <h5 id="esmodule实现原理"><a href="#esmodule实现原理" class="header-anchor">#</a> ESmodule实现原理</h5> <ul><li>本质上是一层代理，exports[&quot;sum&quot;] =&gt; definition[&quot;sum&quot;]</li></ul> <p><img src="/assets/img/es_01.912bff4e.png" alt=""></p> <p><img src="/assets/img/es_02.15e266c7.png" alt=""></p> <h3 id="_5-2认识source-map"><a href="#_5-2认识source-map" class="header-anchor">#</a> 5.2认识source-map</h3> <ul><li>我们的代码通常运行在浏览器上时，是通过打包压缩的：
<ul><li>真实跑在浏览器上的代码，和我们编写的代码是有差异的</li> <li>ES6的代码可能被转换成ES5（babel）</li> <li>对应代码行号、列号在经过编译之后肯定不一致</li> <li>进行代码丑化压缩时，会将变量名称修改</li> <li>比如使用TS写代码，最终转换成JS</li></ul></li> <li>这样的话，我们代码报错时，很难去定位错误：
<ul><li>因为到时候报错信息是在bundle.js下面的某行</li> <li>肯定和原来的编写文件不一样</li></ul></li> <li>那么我们如何去试条这种转换后不一致的代码呢？答案就是source-map
<ul><li><strong>source-map是从已转换的代码，映射到原始的源文件</strong></li> <li>使浏览器可以重构原始源并在调试器中显示重建的原始源</li> <li>到时候哪里报错了，就直接在这个文件中体现出来，定位到某一行，便于试调</li></ul></li></ul> <h4 id="_5-2-1如何使用source-map"><a href="#_5-2-1如何使用source-map" class="header-anchor">#</a> 5.2.1如何使用source-map</h4> <p>一共两个步骤：</p> <ul><li>根据源文件，生成source-map文件，webpack在打包时，可以通过配置生成source-map</li> <li>在转换后的代码，最后添加一个注释，它指向sourcemap</li></ul> <img src="C:\coderqmj\myBlog\docs\pages\WebPack\images\sourcemap_02.png"> <ul><li>报错信息非常高级，会提示哪个文件，哪行代码，和我们自己编写的文件一模一样</li></ul> <p><img src="C:%5Ccoderqmj%5CmyBlog%5Cdocs%5Cpages%5CWebPack%5Cimages%5Csourcemap_04.png" alt=""></p> <p><img src="C:%5Ccoderqmj%5CmyBlog%5Cdocs%5Cpages%5CWebPack%5Cimages%5Csourcemap_03.png" alt=""></p> <h4 id="_5-2-2-分析sourcemap"><a href="#_5-2-2-分析sourcemap" class="header-anchor">#</a> 5.2.2 分析sourcemap</h4> <ul><li>最初source-map生成的文件带下是原始文件的10倍，第二版减少了月20%，第三版减少了50%，所以目前一个133kb的文件，最终的source-map大小大概在300kb</li> <li>性能在慢慢变好</li> <li>source-map的字段
<ul><li>version，代表哪个版本的source-map，目前第三版</li> <li>sources，这个bundle文件从哪里加载来的</li> <li>names，转换之前的变量属性名称</li> <li>mappings，采用base64 VLQ（可变长度质量）编码，存放映射位置信息，变量名称信息</li> <li>file，对应打包后的文件，一般为 js/bundle.js</li> <li>sourcesContent，对应的是我们的源代码</li> <li>sourceRoot，相对根目录</li></ul></li> <li>以下是一个第三版本的sourcemap</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;webpack://coderqmj/./src/js/format.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/./src/js/math.js&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/webpack/bootstrap&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/webpack/runtime/compat get default export&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/webpack/runtime/define property getters&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/webpack/runtime/hasOwnProperty shorthand&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/webpack/runtime/make namespace object&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;webpack://coderqmj/./src/index.js&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;names&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;mappings&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;;;;;;;;;AAAA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACZO;AACP;AACA;;AAEO;AACP;AACA;;;;;;;;UCNA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA,cAAc,0BAA0B,EAAE;WAC1C,cAAc,eAAe;WAC7B,gCAAgC,YAAY;WAC5C;WACA,E;;;;;WCPA;WACA;WACA;WACA;WACA,wCAAwC,yCAAyC;WACjF;WACA;WACA,E;;;;;WCPA,6CAA6C,wDAAwD,E;;;;;WCArG;WACA;WACA;WACA,sDAAsD,kBAAkB;WACxE;WACA,+CAA+C,cAAc;WAC7D,E;;;;;;;;;;;;;;ACNA;AACA,aAAa,mBAAO,CAAC,mCAAW;;AAEhC;AACiC;;AAEjC;AACA;;AAEA,YAAY,4DAAiB;AAC7B,YAAY,6DAAkB;;AAE9B,gB&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;file&quot;</span><span class="token operator">:</span> <span class="token string">&quot;js/boundle.js&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourcesContent&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">&quot;const dateFormat = (date) =&gt; {\n  return \&quot;2020-12-12\&quot;;\n}\n\nconst priceFormat = (price) =&gt; {\n  return \&quot;100.00\&quot;;\n}\n\n\nmodule.exports = {\n  dateFormat,\n  priceFormat\n}\n&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;export const sum = (num1, num2) =&gt; {\n  return num1 + num2;\n}\n\nexport const mul = (num1, num2) =&gt; {\n  return num1 * num2;\n}\n\n&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module &amp;&amp; module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) &amp;&amp; !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' &amp;&amp; Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;// esmodule 导出内容， CommonJS导入内容\r\nconst math = require('./js/math');\r\n\r\n// commonjs 导出内容， es module导入内容\r\nimport format from \&quot;./js/format\&quot;;\r\n\r\nconsole.log(math.sum(20,30));\r\nconsole.log(math.mul(20,30));\r\n\r\nconsole.log(format.dateFormat(\&quot;abba\&quot;))\r\nconsole.log(format.priceFormat(\&quot;a\&quot;))\r\n\r\nconsole.log(bav)&quot;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourceRoot&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_5-2-3如何在webpack打包时-生成对应的sputce-map呢"><a href="#_5-2-3如何在webpack打包时-生成对应的sputce-map呢" class="header-anchor">#</a> 5.2.3如何在webpack打包时，生成对应的sputce-map呢</h4> <ul><li>目前webpack提供了26个不同的值，来处理source-map</li> <li>根据不同的值会有不同的作用，打包过程也有性能的差异，可以根据不同的情况进行选择</li> <li>https://webpack.docschina.org/configuration/devtool/</li></ul> <p><strong>devtool下面几个值不会生成source-map</strong></p> <ul><li>false，直接生成build文件</li> <li>none，production模式下的默认值，不生成source-map，和上面的区别就是，none在development模式下就会报错</li> <li>eval，development模式下的默认值，不生成source-map
<ul><li>但是他会在eval执行的代码中，添加//#sourceURL= ;</li> <li>他会被浏览器执行时解析，并且在试调面板中生成对应的一些文件目录，方便试调代码</li> <li>速度会快一点</li> <li>但是不是非常准确，还原了一个大概的值</li></ul></li> <li>source-map，会生成独立的source-map文件，并在bundle文件中有一个注释，指向sourcemap文件
<ul><li>bundle文件中有如下的注释：</li> <li>//# sourceMappingURL = bundle.js.map</li></ul></li> <li>eval-source-map, 不生成单独的source-map文件，但是在bundle文件里面中的eval中，包含了source-map的代码</li> <li>inline-source-map，用base64编码，将source-map 的代码放到bundle文件的最后</li> <li>cheap-source-map，
<ul><li>会生成source-map，但是会更加高效（cheap是低开销），因为他没有生列成映射，没有列的信息</li> <li>因为在开发中，我们只需要行信息通常就可以可以定位到错误了</li></ul></li></ul> <p><img src="/assets/img/cheap_source_map_01.e58d1107.png" alt=""></p> <ul><li>Cheap-moudle-source-map
<ul><li>会生成source-map，类似于cheap-source-map，但是对源自loader的sourcemap处理会更好</li> <li>如果是ES6语法，肯定要经过一些列loader处理，经过loader处理的后再使用其他source-map，会使得报错信息不准确，行号会变，源代码也会变</li> <li>但是经过loader和cheap-moudle-source-map同时处理的打包文件就不会改变行号，会准确一些</li></ul></li></ul> <h4 id="_5-2-4-在开发中-最佳实践是什么呢"><a href="#_5-2-4-在开发中-最佳实践是什么呢" class="header-anchor">#</a> 5.2.4 在开发中，最佳实践是什么呢？</h4> <ul><li>开发阶段：推荐使用source-map或者cheap-module-source-map
<ul><li>这里分别是vue和react使用的值，可以获取试调信息，方便快速开发</li></ul></li> <li>测试节点：推荐使用source-map或者cheap-module-source-map
<ul><li>测试阶段我们也希望在浏览器下看到正确的错误提示</li></ul></li> <li>发布阶段，false、缺省值（不写）
<ul><li>首先是用户使用的，人家也看不懂</li> <li>最重要的是要是把源码放出去，就很危险，造成安全隐患</li></ul></li></ul> <h2 id="六、babel深入解析"><a href="#六、babel深入解析" class="header-anchor">#</a> 六、Babel深入解析</h2> <h3 id="_6-1babel简单介绍"><a href="#_6-1babel简单介绍" class="header-anchor">#</a> 6.1Babel简单介绍</h3> <p><strong>为什么需要babel？</strong></p> <ul><li>在编码中，很少接触babel，但是对于前端开发来说，这是不可获取的</li> <li>我们想要在项目中使用ES6，TS，开发React项目，都是离不开babel转换的</li> <li>所以，学习babel对于我们理解代码从编写到上限的转变过程至关重要</li></ul> <p><strong>那babel到底是什么？</strong></p> <ul><li>babel是一个工具链，主要用于旧浏览器或者缓解中将ES2015+代码转换为向后兼容版本的JS</li> <li>包括语法转换、源代码转换、Polyfill实现目标缓解缺少的功能等</li></ul> <h3 id="_6-2babel使用"><a href="#_6-2babel使用" class="header-anchor">#</a> 6.2Babel使用</h3> <h4 id="_6-2-1babel简单使用"><a href="#_6-2-1babel简单使用" class="header-anchor">#</a> 6.2.1babel简单使用</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 源文件</span>
<span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token function">foo</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>安装</strong> ：<code>npm i @babel/core -D</code></p> <p><strong>在命令行中使用babel</strong> ： <code>npm i @babel/cli -D</code></p> <p><strong>babel输出</strong> ： <code>npx babel src --out-dir result</code></p> <ul><li>可以看到上面结果是无法转换箭头函数的，所以还需要转换箭头函数的插件</li></ul> <p><strong>箭头函数转换插件</strong> ： <code>npm i @babel/plugin-transform-arrow-functions -D</code></p> <p><strong>使用插件</strong> ： <code>npx babel src --out-dir result --plugins=@babel/plugin-transform-arrow-functions</code></p> <ul><li>可以看到，箭头函数转换了，但是ES6的<code>const</code>没有转换</li> <li>这个时候就需要装<code>@babel/plugin-transform-block-scoping</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span> 

<span class="token function">foo</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>块级作用域转换插件</strong> ： <code>npm i @babel/plugin-transform-block-scoping -D</code></p> <ul><li>使用箭头转换和块级作用域转换，生成如下代码</li> <li>const被转换，箭头函数也被转换</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_6-2-2那么问题来了-es6这么多需要转换的-难道都需要一个个写吗"><a href="#_6-2-2那么问题来了-es6这么多需要转换的-难道都需要一个个写吗" class="header-anchor">#</a> 6.2.2那么问题来了，ES6这么多需要转换的，难道都需要一个个写吗？</h4> <ul><li>当然不是，如果一次性需要配置很多转换的话，就需要预设</li> <li><strong>安装预设</strong> ： <code>npm i @babel/preset-env -D</code></li> <li><strong>使用预设</strong> ： <code>npx babel src --out-dir result --presets=@babel/preset-env</code></li> <li>生成代码如下</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token string">&quot;use strict&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> message <span class="token operator">=</span> <span class="token string">&quot;Hello World&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token parameter">info</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>info<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">foo</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="_6-3babel底层原理"><a href="#_6-3babel底层原理" class="header-anchor">#</a> 6.3babel底层原理</h3> <p><strong>先看下JS执行过程</strong> ：源代码 -&gt; AST（abstract syntax tree） -&gt; ByteCode -&gt; 被V8引擎处理执行</p> <p><strong>我们把帮我们完成上面这一系列操作的叫做编译器，最主要帮我们做三个操作</strong></p> <ul><li>对代码进行解析生成AST，AST之后再对代码进行转换，生成另外一种代码，如字节码，也有可能是另外一中代码
<ul><li>源码是ES6的，生成原AST，再生成新AST树，再生成ES5的代码</li> <li>这个过程就是babel帮我们完成</li></ul></li></ul> <p><strong>babel如何做到把我们的代码（ES6，TS，JSX）转成ES5代码的？</strong></p> <ul><li>源一中源码（原生语言）转换成另外一种源码（目标语言），有这种功能的工具叫什么呢？</li> <li>这个就叫做编译器，事实上我们可以把babel看成就是一个编译器</li> <li>babel编译器的作用就是将我们的源代码，转换成浏览器可以直接识别的另外一段源代码</li></ul> <p><strong>babel的编译器工作流程</strong></p> <ul><li>解析阶段</li> <li>转换阶段</li> <li>生成阶段</li> <li>总结一下就是： 源代码 -&gt; 解析 -&gt; 转换 -&gt; 代码生成 -&gt; 目标代码 （大致过程）</li> <li>详细流程：</li></ul> <p><img src="/assets/img/babel_yuanli_01.aec75cc5.png" alt=""></p> <p><strong>下面就根据一段代码来分析下整个编译流程</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 原生代码文件</span>
<span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">&quot;coderwhy&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">foo</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>开始词法分析，像const name = 字符串会被一个个提取出来</li> <li>这些词提取出来会生成tokens数组</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Keyword&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 关键字</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;const&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 标识符</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 括号，等号，分号，逗号都叫这个</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;=&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;)&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;=&gt;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;console&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;.&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;)&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;(&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;String&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\&quot;coderwhy\&quot;&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;)&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
      <span class="token string">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Punctuator&quot;</span><span class="token punctuation">,</span>
      <span class="token string">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;;&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><ul><li>再然后就是语分析
<ul><li>怎么分析呢？就是拿到这个tokens数组进行遍历</li> <li>判断当前的值是个“const”的话，就知道它定义个变量</li> <li>这个过程也叫做 Parsing</li></ul></li> <li>经过各种分析之后，就会生成AST，抽象语法树长什么样呢？
<ul><li>最外层有一些信息，type存放Program，</li> <li>body存放着一些代码信息，比如定义了一个foo标识符，初始化为箭头函数</li></ul></li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Program&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclaration&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;declarations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclarator&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;init&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ArrowFunctionExpression&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
            <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CallExpression&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;callee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MemberExpression&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;computed&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token property">&quot;object&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;console&quot;</span>
                <span class="token punctuation">}</span><span class="token punctuation">,</span>
                <span class="token property">&quot;property&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">,</span>
              <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;generator&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expression&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
            <span class="token property">&quot;async&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;const&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExpressionStatement&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;expression&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CallExpression&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;callee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Literal&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;coderwhy&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;raw&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\&quot;coderwhy\&quot;&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;script&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>然后就是对上面这个AST进行遍历，深度优先</li> <li>去访问这个树上的每一个节点</li> <li>然后在访问的过程中应用每一个插件对代码进行转换，对某些节点进行修改（插件就是在这个过程中被应用的）</li> <li>访问完每一个节点并且应用插件修改完之后，就会生成一个新的AST</li></ul> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Program&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclaration&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;declarations&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;VariableDeclarator&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token property">&quot;init&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;FunctionExpression&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;params&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
              <span class="token punctuation">{</span>
                <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
              <span class="token punctuation">}</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;BlockStatement&quot;</span><span class="token punctuation">,</span>
              <span class="token property">&quot;body&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token punctuation">{</span>
                  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ReturnStatement&quot;</span><span class="token punctuation">,</span>
                  <span class="token property">&quot;argument&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CallExpression&quot;</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;callee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;MemberExpression&quot;</span><span class="token punctuation">,</span>
                      <span class="token property">&quot;computed&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                      <span class="token property">&quot;object&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;console&quot;</span>
                      <span class="token punctuation">}</span><span class="token punctuation">,</span>
                      <span class="token property">&quot;property&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;log&quot;</span>
                      <span class="token punctuation">}</span>
                    <span class="token punctuation">}</span><span class="token punctuation">,</span>
                    <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                      <span class="token punctuation">{</span>
                        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
                        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span>
                      <span class="token punctuation">}</span>
                    <span class="token punctuation">]</span>
                  <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
              <span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token property">&quot;generator&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;expression&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
            <span class="token property">&quot;async&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;var&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ExpressionStatement&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;expression&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CallExpression&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;callee&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Identifier&quot;</span><span class="token punctuation">,</span>
          <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;foo&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token property">&quot;arguments&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Literal&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;coderwhy&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;raw&quot;</span><span class="token operator">:</span> <span class="token string">&quot;\&quot;coderwhy\&quot;&quot;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;sourceType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;script&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>然后再根据这个新的AST生成ES5的代码</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/pages/Node/Node版本管理.html" class="prev">
        Node版本管理
      </a></span> <span class="next"><a href="/pages/Leetcode/动态规划.html">
        动态规划
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ab08ac82.js" defer></script><script src="/assets/js/2.fe6dca74.js" defer></script><script src="/assets/js/4.08c03269.js" defer></script>
  </body>
</html>
