<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.React中的keys作用？ | 邱模建的博客</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/avatar.png">
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.ab08ac82.js" as="script"><link rel="preload" href="/assets/js/2.fe6dca74.js" as="script"><link rel="preload" href="/assets/js/80.45ff8ec4.js" as="script"><link rel="prefetch" href="/assets/js/10.44ca1bce.js"><link rel="prefetch" href="/assets/js/100.ff4a7272.js"><link rel="prefetch" href="/assets/js/101.4f5b1dfc.js"><link rel="prefetch" href="/assets/js/102.4b0b16e2.js"><link rel="prefetch" href="/assets/js/103.cb5f3e5c.js"><link rel="prefetch" href="/assets/js/104.b1811512.js"><link rel="prefetch" href="/assets/js/105.aa082472.js"><link rel="prefetch" href="/assets/js/106.91d2c8b0.js"><link rel="prefetch" href="/assets/js/107.3dea83b1.js"><link rel="prefetch" href="/assets/js/108.236a9cb3.js"><link rel="prefetch" href="/assets/js/109.8deba790.js"><link rel="prefetch" href="/assets/js/11.0dcd522a.js"><link rel="prefetch" href="/assets/js/110.0e0d34b4.js"><link rel="prefetch" href="/assets/js/111.0b565b05.js"><link rel="prefetch" href="/assets/js/112.cbd56ebc.js"><link rel="prefetch" href="/assets/js/113.6b220f73.js"><link rel="prefetch" href="/assets/js/114.84e8b596.js"><link rel="prefetch" href="/assets/js/115.9fc640b7.js"><link rel="prefetch" href="/assets/js/116.9a86f717.js"><link rel="prefetch" href="/assets/js/12.3ecee4d7.js"><link rel="prefetch" href="/assets/js/13.dc43ca20.js"><link rel="prefetch" href="/assets/js/14.2a807370.js"><link rel="prefetch" href="/assets/js/15.f2ae64fb.js"><link rel="prefetch" href="/assets/js/16.6cefb4c6.js"><link rel="prefetch" href="/assets/js/17.fba8bb8c.js"><link rel="prefetch" href="/assets/js/18.4d5bfc74.js"><link rel="prefetch" href="/assets/js/19.71623cf1.js"><link rel="prefetch" href="/assets/js/20.c1d3e8bd.js"><link rel="prefetch" href="/assets/js/21.89055cf4.js"><link rel="prefetch" href="/assets/js/22.4954c039.js"><link rel="prefetch" href="/assets/js/23.7c6f9745.js"><link rel="prefetch" href="/assets/js/24.4a9c9785.js"><link rel="prefetch" href="/assets/js/25.01027ef7.js"><link rel="prefetch" href="/assets/js/26.fb9ca95d.js"><link rel="prefetch" href="/assets/js/27.c0398869.js"><link rel="prefetch" href="/assets/js/28.d1b45b70.js"><link rel="prefetch" href="/assets/js/29.b42a2154.js"><link rel="prefetch" href="/assets/js/3.872ae142.js"><link rel="prefetch" href="/assets/js/30.fba61f27.js"><link rel="prefetch" href="/assets/js/31.4c8105b8.js"><link rel="prefetch" href="/assets/js/32.4390fdb1.js"><link rel="prefetch" href="/assets/js/33.fb22efe6.js"><link rel="prefetch" href="/assets/js/34.c790ec04.js"><link rel="prefetch" href="/assets/js/35.9559fbf9.js"><link rel="prefetch" href="/assets/js/36.bf93938b.js"><link rel="prefetch" href="/assets/js/37.49295366.js"><link rel="prefetch" href="/assets/js/38.90fc60b9.js"><link rel="prefetch" href="/assets/js/39.a18d83e7.js"><link rel="prefetch" href="/assets/js/4.08c03269.js"><link rel="prefetch" href="/assets/js/40.08bcd26b.js"><link rel="prefetch" href="/assets/js/41.9f70e821.js"><link rel="prefetch" href="/assets/js/42.b6f1d960.js"><link rel="prefetch" href="/assets/js/43.1bc00c36.js"><link rel="prefetch" href="/assets/js/44.89fd78b3.js"><link rel="prefetch" href="/assets/js/45.66558dce.js"><link rel="prefetch" href="/assets/js/46.6fb2cd24.js"><link rel="prefetch" href="/assets/js/47.d56d286f.js"><link rel="prefetch" href="/assets/js/48.35519a50.js"><link rel="prefetch" href="/assets/js/49.361857da.js"><link rel="prefetch" href="/assets/js/5.581fb300.js"><link rel="prefetch" href="/assets/js/50.d8fd2f28.js"><link rel="prefetch" href="/assets/js/51.92e3216f.js"><link rel="prefetch" href="/assets/js/52.fbc53d2a.js"><link rel="prefetch" href="/assets/js/53.eff022d3.js"><link rel="prefetch" href="/assets/js/54.634800e1.js"><link rel="prefetch" href="/assets/js/55.4c05b71c.js"><link rel="prefetch" href="/assets/js/56.4ab46734.js"><link rel="prefetch" href="/assets/js/57.ca27214f.js"><link rel="prefetch" href="/assets/js/58.d5242a99.js"><link rel="prefetch" href="/assets/js/59.0195abe1.js"><link rel="prefetch" href="/assets/js/6.f3fdc29d.js"><link rel="prefetch" href="/assets/js/60.f4553c6f.js"><link rel="prefetch" href="/assets/js/61.910c747c.js"><link rel="prefetch" href="/assets/js/62.11338b10.js"><link rel="prefetch" href="/assets/js/63.4db680cc.js"><link rel="prefetch" href="/assets/js/64.03470149.js"><link rel="prefetch" href="/assets/js/65.226aac33.js"><link rel="prefetch" href="/assets/js/66.ff242f26.js"><link rel="prefetch" href="/assets/js/67.4fa75535.js"><link rel="prefetch" href="/assets/js/68.8e397504.js"><link rel="prefetch" href="/assets/js/69.4e44158e.js"><link rel="prefetch" href="/assets/js/7.23c3e498.js"><link rel="prefetch" href="/assets/js/70.3c03822d.js"><link rel="prefetch" href="/assets/js/71.32e2c279.js"><link rel="prefetch" href="/assets/js/72.f5ac84af.js"><link rel="prefetch" href="/assets/js/73.64adb473.js"><link rel="prefetch" href="/assets/js/74.d7b550fe.js"><link rel="prefetch" href="/assets/js/75.be770e67.js"><link rel="prefetch" href="/assets/js/76.a7692266.js"><link rel="prefetch" href="/assets/js/77.fcafefb3.js"><link rel="prefetch" href="/assets/js/78.d1de0597.js"><link rel="prefetch" href="/assets/js/79.c4cbe623.js"><link rel="prefetch" href="/assets/js/8.561638da.js"><link rel="prefetch" href="/assets/js/81.a7006a2e.js"><link rel="prefetch" href="/assets/js/82.16b4b62c.js"><link rel="prefetch" href="/assets/js/83.bde15b26.js"><link rel="prefetch" href="/assets/js/84.9555f7e8.js"><link rel="prefetch" href="/assets/js/85.342c98a2.js"><link rel="prefetch" href="/assets/js/86.3dc6bedd.js"><link rel="prefetch" href="/assets/js/87.1ed60d78.js"><link rel="prefetch" href="/assets/js/88.a97aa37d.js"><link rel="prefetch" href="/assets/js/89.40d81536.js"><link rel="prefetch" href="/assets/js/9.4a2b0589.js"><link rel="prefetch" href="/assets/js/90.b0be239c.js"><link rel="prefetch" href="/assets/js/91.d1b597cd.js"><link rel="prefetch" href="/assets/js/92.0c0131a5.js"><link rel="prefetch" href="/assets/js/93.6a045b51.js"><link rel="prefetch" href="/assets/js/94.b9a23713.js"><link rel="prefetch" href="/assets/js/95.581789a6.js"><link rel="prefetch" href="/assets/js/96.cef1bc26.js"><link rel="prefetch" href="/assets/js/97.82bec4e2.js"><link rel="prefetch" href="/assets/js/98.e88e6b38.js"><link rel="prefetch" href="/assets/js/99.1c62b889.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/avatar.png" alt="邱模建的博客" class="logo"> <span class="site-name can-hide">邱模建的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="分类" class="dropdown-title"><span class="title">分类</span> <span class="arrow down"></span></button> <button type="button" aria-label="分类" class="mobile-dropdown-title"><span class="title">分类</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  文章
</a></li><li class="dropdown-item"><!----> <a href="/pages/JavaScript/实现拖拽.html" class="nav-link">
  琐碎
</a></li></ul></div></div><div class="nav-item"><a href="https://leetcode-cn.com/u/2vgrNDufDX/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LeetCode
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/zuogerenba" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>计算机网络</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/ComputerNet/HTTP.html" class="sidebar-link">1.HTTP相关</a></li><li><a href="/pages/ComputerNet/七层模型.html" class="sidebar-link">2.七/四/五层模型</a></li><li><a href="/pages/ComputerNet/浏览器缓存.html" class="sidebar-link">浏览器缓存</a></li><li><a href="/pages/ComputerNet/HTTPS.html" class="sidebar-link">HTTPS</a></li><li><a href="/pages/ComputerNet/浏览器安全.html" class="sidebar-link">浏览器安全</a></li><li><a href="/pages/ComputerNet/浏览器性能优化.html" class="sidebar-link">浏览器性能优化</a></li><li><a href="/pages/ComputerNet/HTTP历史.html" class="sidebar-link">HTTP历史</a></li><li><a href="/pages/ComputerNet/HTTP请求流程.html" class="sidebar-link">HTTP请求流程</a></li><li><a href="/pages/ComputerNet/JavaScript如何影响DOM树构建.html" class="sidebar-link">JavaScript如何影响DOM树构建</a></li><li><a href="/pages/ComputerNet/CSS如何影响首次白屏.html" class="sidebar-link">CSS如何影响首次白屏</a></li><li><a href="/pages/ComputerNet/分层合成：为什么CSS比JS高效.html" class="sidebar-link">分层合成：为什么CSS比JS高效</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VUE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>NODE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据结构与算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>GIT教程</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TypeScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>正则表达式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>项目</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>实习遇到的问题及成长</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>腾讯工作的思考与总结</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>琐碎</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="_1-react中的keys作用"><a href="#_1-react中的keys作用" class="header-anchor">#</a> 1.React中的keys作用？</h3> <div class="language- extra-class"><pre class="language-text"><code>作用：Keys是React中用于追踪列表中元素的增、删、改时的辅助标识

具体：
	key是列表子元素的唯一标识符，新的组件可能对这个列表进行了
	增加，删除，重新排列子元素的操作，有了key的话，新旧组件对比
	到相同的key，就可以避免节点不必要的删除与创建操作，时节点的
	复用性提高，达到了提高性能的目的
	
	key 相同，但属性不同，只会更新属性；
	key不同，则会销毁组件，重新创建新组件
</code></pre></div><h3 id="_2-refs的作用"><a href="#_2-refs的作用" class="header-anchor">#</a> 2.refs的作用</h3> <div class="language- extra-class"><pre class="language-text"><code>作用：安全访问某个元素或者某个组件实例的句柄。
使用场景：媒体播放，文本选择，触发强制动画
</code></pre></div><h3 id="_3-修改了state进行相关的操作"><a href="#_3-修改了state进行相关的操作" class="header-anchor">#</a> 3.修改了state进行相关的操作</h3> <div class="language- extra-class"><pre class="language-text"><code>1.通过setState的第二个回调函数
2.通过生命周期函数
</code></pre></div><h3 id="_4-diff算法说一下"><a href="#_4-diff算法说一下" class="header-anchor">#</a> 4.diff算法说一下</h3> <h3 id="_5-setstate什么时候是同步的-什么时候是异步的"><a href="#_5-setstate什么时候是同步的-什么时候是异步的" class="header-anchor">#</a> 5.setState什么时候是同步的，什么时候是异步的？</h3> <div class="language- extra-class"><pre class="language-text"><code>一.同步情况
	1.setTimeout里面是同步的
	2.原生DOM事件(addEventListener)是同步的

二、异步
	1.合成事件
	2.生命周期
</code></pre></div><h3 id="_6-哪里可以拿到最近的state值"><a href="#_6-哪里可以拿到最近的state值" class="header-anchor">#</a> 6.哪里可以拿到最近的state值</h3> <div class="language- extra-class"><pre class="language-text"><code>1.生命周期函数componentDidUpdate

2.setState里面的第二个回调参数可以拿到最近的值
</code></pre></div><h3 id="_7-多个setstate的合并"><a href="#_7-多个setstate的合并" class="header-anchor">#</a> 7.多个setState的合并</h3> <ul><li>还是1</li> <li>源码内部用了do while循环</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>  <span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      counter<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</code></pre></div><ul><li>如果想要它累加呢？</li> <li>将第一个参数设置为函数(prevState, props),拿到先前的state</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      counter<span class="token operator">:</span> prevState<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      counter<span class="token operator">:</span> prevState<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">prevState<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      counter<span class="token operator">:</span> prevState<span class="token punctuation">.</span>counter <span class="token operator">+</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre></div><h3 id="_8-父子组件通信-兄弟组件通信"><a href="#_8-父子组件通信-兄弟组件通信" class="header-anchor">#</a> 8.父子组件通信/兄弟组件通信</h3> <div class="language- extra-class"><pre class="language-text"><code>Context/eventBus
父传子：props
子传父：props，在父组件创建好函数，传入props中，在子组件里取出来，从而达到使用父组件的state。
兄弟：event bus安装第三方、context Provider提供数据，Consumer里面使用数据
redux
</code></pre></div><h3 id="_9-react渲染dom的原理"><a href="#_9-react渲染dom的原理" class="header-anchor">#</a> 9.react渲染DOM的原理</h3> <div class="language- extra-class"><pre class="language-text"><code>JSX -&gt; 虚拟DOM -&gt; 真实DOM
1.首先我们一般都使用JSX去写一些DOM，但本质上这是一种语法糖，内部会帮我们做一个转换，将JSX语法转换成
React.createElement(标签，属性，子组件)这个函数。
2.React.createElement：
	这个函数主要做三样事情：
		1.取出config属性
			1.key，ref，source等等
			2.创建一个属性的对象，将每个属性通过for in循环config进行存储至props中
		2.处理children
			1.判断孩子长度是否&gt;1，1的话props.children=children;
			2.&gt;1的话，创建一个数组childrenArray，通过遍历children，将数组赋值，最后props.children=childrenArray
		3.返回ReactElement（虚拟DOM）
</code></pre></div><h3 id="_10-react更新流程"><a href="#_10-react更新流程" class="header-anchor">#</a> 10.React更新流程</h3> <div class="language- extra-class"><pre class="language-text"><code>props/state改变 -&gt; render函数重新执行 -&gt; 产生新的DOM树
-&gt; 新旧DOM树进行diff -&gt; 计算差异进行更新 -&gt; 更新到真实的DOM
</code></pre></div><h3 id="_11-react和vue的差异"><a href="#_11-react和vue的差异" class="header-anchor">#</a> 11.React和Vue的差异</h3> <div class="language- extra-class"><pre class="language-text"><code>1.创建组件的方式
	vue通过.vue文件就可以创建一个组件
	react通过js创建类组件(继承Component)和函数组件

2.更新状态不一样
	vue拿到data可以直接进行修改
	react通过setState修改，用新的state替换旧state

3.生命周期
	vue里面有beforeCreate，created ，react没有
	vue没有手动判断组件是否需要更新，react有shouldComponentUpdate

4.组件通信
	vue父传子props，子传父通过emit。react的props则是两者都可以
	跨组件vue用事件总线，react用context
	
5.书写方式
	vue封装了很多指令：v-bind，v-for；react更多的是用原生js，更加纯粹
</code></pre></div><h3 id="_12-jsx的本质-虚拟dom的创建过程"><a href="#_12-jsx的本质-虚拟dom的创建过程" class="header-anchor">#</a> 12.jsx的本质/虚拟DOM的创建过程</h3> <div class="language- extra-class"><pre class="language-text"><code>jsx 仅仅只是 React.createElement(component, props, ...children) 函数的语法糖。
所有的jsx最终都会被转换成React.createElement的函数调用
</code></pre></div><h3 id="_13-useselector缺点-怎么解决"><a href="#_13-useselector缺点-怎么解决" class="header-anchor">#</a> 13.useSelector缺点？怎么解决</h3> <div class="language- extra-class"><pre class="language-text"><code>他会使本不该重新渲染的页面发生重新渲染，
第二个参数用shallowEqual，进行浅层比较
</code></pre></div><h3 id="_14-为什么使用redux-redux更新数据后为什么重新渲染"><a href="#_14-为什么使用redux-redux更新数据后为什么重新渲染" class="header-anchor">#</a> 14.为什么使用Redux? Redux更新数据后为什么重新渲染</h3> <div class="language- extra-class"><pre class="language-text"><code>1.redux完美解决了组件之间的通信问题，不然就要通过props传来传去，有redux，每个组件都可以从redux获取最新store数据，也可以修改store里面的数据。
2.数据修改时可以被追踪

重新渲染：
	在componentDidMount订阅了store的变化，且在componentWillUnmount进行取消订阅。
	用connect纯函数实现的
</code></pre></div><h3 id="_14-纯函数connect"><a href="#_14-纯函数connect" class="header-anchor">#</a> 14.纯函数connect</h3> <div class="language- extra-class"><pre class="language-text"><code>
</code></pre></div><h3 id="_15-请求数据存到redux过程"><a href="#_15-请求数据存到redux过程" class="header-anchor">#</a> 15.请求数据存到redux过程</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span>定义接口，定义常量
<span class="token number">2.</span>在reducer里面定义数组用于存储
<span class="token number">3.</span>在reducer里面<span class="token keyword">case</span>，并返回修改的数据
<span class="token number">4.</span>在actionCreators里面定义getXXXAction
<span class="token number">5.</span>在actionCreators里面定义changeXXXAction供getXXXAction使用
    <span class="token keyword">const</span> <span class="token function-variable function">changeHotRecommendAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
      type<span class="token operator">:</span> actionTypes<span class="token punctuation">.</span><span class="token constant">CHANGE_HOT_RECOMMEND</span><span class="token punctuation">,</span>
      hotRecommend<span class="token operator">:</span> res<span class="token punctuation">.</span>banners
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getHotRecommendAction</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token parameter">dispatch</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">getHotRecommend</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>
          <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">changeHotRecommendAction</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token number">6.</span>在相关页面使用useDispatch和useEffect请求
  <span class="token keyword">const</span> <span class="token punctuation">{</span> hotRecommend <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useSelector</span><span class="token punctuation">(</span><span class="token parameter">state</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    hotRecommend<span class="token operator">:</span> state<span class="token punctuation">.</span><span class="token function">getIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'recommend'</span><span class="token punctuation">,</span>hotRecommend<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>shallowEqual<span class="token punctuation">)</span>
  
  <span class="token keyword">const</span> dispatch <span class="token operator">=</span> <span class="token function">useDispatch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 其他hooks</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">getHotRecommendAction</span><span class="token punctuation">(</span>limit<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span>dispatch<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="_15-redux请求数据过程"><a href="#_15-redux请求数据过程" class="header-anchor">#</a> 15.redux请求数据过程</h3> <div class="language- extra-class"><pre class="language-text"><code>1.首先封装请求数据的函数，导出
2.定义常量。
4.在actionCreators定义action，action由type和payload对象组成。拿到请求结果，放入state里面
3.在业务代码中dispatch(action)，他会自动调用reducer。
3.在reducer里面进行switch case actionType，返回最新的state
5.在组件里面进行useEffect请求。
</code></pre></div><h3 id="_16-生命周期"><a href="#_16-生命周期" class="header-anchor">#</a> 16.生命周期</h3> <div class="language- extra-class"><pre class="language-text"><code>常用：
1.Constructor：初始化内部state，绑定this
2.componentDidMount: 组件挂载到DOM上就会回调
	1.依赖DOM的操作
	2.发送网络请求
	3.添加订阅事件(在unmounted里面取消)
3.componentDidUpdate
	1.更新后立即调用
	2.如果需要与新旧props进行对比可以在这里
4.componentWillUnmount：组件即将被移除，回调
	1.清理操作
	2.订阅事件，timer，取消网络请求
5.shouldComponentUpdate	
	1.手动判断组件是否更新

不推荐使用：
	willMounted，willUpdate
	
官方文档：
	官方文档分为常用生命周期和不常用生命周期
		常用生命周期：
			1.constructor
			2.render
			3.componentDidMount
			4.componentDidUpdate
			5.componentWillUnMount
		不常用：
			1.getDerivedStateFromProps：在调用render方法之前调用
			2.getSnapshotBeforeUpdate：在最近一次渲染输出之前调用，是组件在发生更改前那个DOM获取信息，如滚动位置。这个生命周期任何返回值都会传给componentDidUpdate。
			3.shouldComponentUpdate：手动判断组件是否需要更新。
</code></pre></div><h3 id="_17-usememo和usecallback的区别"><a href="#_17-usememo和usecallback的区别" class="header-anchor">#</a> 17.useMemo和useCallback的区别</h3> <div class="language- extra-class"><pre class="language-text"><code>1.useMemo是让函数在依赖不改变的情况下，不对这个值进行重新运算	
1.useCallback是对函数进行缓存，用于子组件引用父组件的函数，父组重新渲染，避免函数的引用发生改变

2.useMemo优化的是函数进行运算的开销
2.useCallback优化的组件重新渲染的开销
</code></pre></div><h3 id="_18-immutablejs"><a href="#_18-immutablejs" class="header-anchor">#</a> 18. ImmutableJs</h3> <div class="language- extra-class"><pre class="language-text"><code>1.使用原因
	reducer里面很多数据，每次修改数据时就要重新浅拷贝(因为react不支持直接修改state)，返回新对象，开销大，浪	 费性能。

2.原理：修改了对象，就返回新的对象，但是旧的对象不发生改变；使用了持久化数据结构，他会尽可能利用之前的数据不会造成性能浪费，使得内存不会被浪费；是一个树结构；

3.使用：
	1.把对象变为Immutable对象，Map(对象),但是只会浅层，使用fromJS会深拷贝转换
	2.设值：info.set(属性，'值')
	3.取值：state.get('name') 或者 state.getIn('recommend','hotRecommend')
</code></pre></div><h3 id="_19-react-hooks"><a href="#_19-react-hooks" class="header-anchor">#</a> 19.react-hooks</h3> <div class="language- extra-class"><pre class="language-text"><code>1.useState 定义数据
2.useEffect 模拟生命周期函数
	1.在里面做网络请求，订阅事件，取消订阅
	2.第一个参数相当于mounted，return那个就是unmounted
3.useContext
	1.可以做一些数据的共享
	2.使用createContext创建相应的context
	3.用Provider作为数据的提供者，将想要被使用数据的组件包裹起来；
	4.在使用数据的组件里面使用useContext，把创建的context传入，就可以拿到共享数据
4.useReducer
	1.不是reducer的替代，是useState的一中替代
	2.state处理的逻辑比较复杂，可以通过useReducer进行拆分

5.useCallback，对性能做优化
	1.对函数进行了缓存，防止子组件做不必要的渲染
	2.用在子组件使用了父组件的函数，如果父组件重新渲染，那么函数的引用就会变，造成子组件认为两次传进来的函数不		一样，从而进行渲染。
	3.可以使用依赖判断其是否需要更新

6.useMemo
	1.对函数是否运行做一些优化
	2.在开发中，组件经常用到一些需要经过计算的属性，但是有些时候这个属性没有发生变化的，但是还是会重新进行计算
	3.需要一个记忆值，将它缓存下来，依赖不变的情况下就不用做不必要的计算
</code></pre></div><h3 id="_20-redux-hooks"><a href="#_20-redux-hooks" class="header-anchor">#</a> 20.redux-hooks</h3> <div class="language- extra-class"><pre class="language-text"><code>1.useDispatch
	1.一般都在useEffect里面
	2.派发相应的action，做一些reducer数据的修改；
2.useSelector
	1.获取redux里面的数据
	2.一般都会用一个浅层比较shallowEqual去
</code></pre></div><h3 id="_21-setstate为什么异步"><a href="#_21-setstate为什么异步" class="header-anchor">#</a> 21.setState为什么异步?</h3> <div class="language- extra-class"><pre class="language-text"><code>1.一句话总结：显著提高性能。
2.解释：
	1.每调用一次setState就代表着render频繁调用，重新渲染页面。效率低。
	2.异步的话可以获取到多个更新，然后批量处理。
3.同步更新state，但是没有执行render那么state就不能和props保持同步；就会产生很多问题。
</code></pre></div><h3 id="_22-为什么使用setstate-不直接修改this-state"><a href="#_22-为什么使用setstate-不直接修改this-state" class="header-anchor">#</a> 22.为什么使用setState？不直接修改this.state</h3> <div class="language- extra-class"><pre class="language-text"><code>1.直接修改this.state，React是不知道数据发生变化的。
2.因为他没有像vue中做了数据数据监听。
3.
</code></pre></div><h3 id="_23-setstate怎么实现的"><a href="#_23-setstate怎么实现的" class="header-anchor">#</a> 23.setState怎么实现的？</h3> <div class="language- extra-class"><pre class="language-text"><code>1.setState有两个参数，第一个partialState，第二个callback
2.首先判断partialState必须是function，object，null中的一个，否则报错
3.执行的是this.updater.enqueueSetState(this, partialState, callback, 'setState');
	每个类组件都有updater
	enqueueSetState根据不同的上下文，生成一个currentTime，再用currentTime计算一个过期时间。
	这个过期时间只有两个值，一个Sync，一个Batched，对应同步，异步（批量处理）
</code></pre></div><h3 id="_24-setstate如何立即获取到更新后的值"><a href="#_24-setstate如何立即获取到更新后的值" class="header-anchor">#</a> 24.setState如何立即获取到更新后的值</h3> <div class="language- extra-class"><pre class="language-text"><code>1.setState里面有第二个参数，是一个回调函数，可以在里面获取到。
2.在componentDidUpdate生命周期也可以获取到最新的值。
</code></pre></div><h3 id="_25-setstate多次合并的问题"><a href="#_25-setstate多次合并的问题" class="header-anchor">#</a> 25.setState多次合并的问题</h3> <div class="language- extra-class"><pre class="language-text"><code>1.setState在传入对象时，多次累加就只会执行一次。
2.想要多次累加的话，可以将setState的第一个参数换为函数。
</code></pre></div><h3 id="_26-高阶组件hoc"><a href="#_26-高阶组件hoc" class="header-anchor">#</a> 26.高阶组件HOC</h3> <div class="language- extra-class"><pre class="language-text"><code>概念：
	和高阶函数很像，把一个组件作为参数传入，经过处理，返回一个新的组件。我的理解就是在使用之前对组件做一个劫持，对它做很多的操作，再去使	用。
作用：
	使代码更优雅，代码可以复用，很多组件需要使用到一些共同属性，一个一个写就很麻烦，直接一个withRouter即可
应用：
	1、增强props(withRouter)
缺点：
	1.有嵌套关系，结构不够美观，阅读性较差
	2.出现了hooks解决了很多问题

</code></pre></div><h3 id="_27-react传参方式"><a href="#_27-react传参方式" class="header-anchor">#</a> 27.React传参方式</h3> <h3 id="_28-react每次setstate都会引起diff算法吗"><a href="#_28-react每次setstate都会引起diff算法吗" class="header-anchor">#</a> 28.React每次setState都会引起diff算法吗</h3> <div class="language- extra-class"><pre class="language-text"><code>不一定

理由：
	1.当进行了SCU优化时，setState之后又进行了浅层比较，有可能就是在浅层比较阶段没有深入对比下去，然后又是state里面对象没有拷贝，造成浅层比较判定值都一样。所以，setState之后，可能不会发起diff算法。
</code></pre></div><h3 id="_29-rn和react的区别"><a href="#_29-rn和react的区别" class="header-anchor">#</a> 29.RN和React的区别</h3> <div class="language- extra-class"><pre class="language-text"><code>RN：用对应的是移动应用平台															React：渲染品台是浏览器HTML渲染
RN：都是用JSX语法进行开发，都是利用虚拟DOM这个特性
RN：自动匹配不同手机的大小
RN：很多css3样式不能使用box-shadow
</code></pre></div><h3 id="_30-redux原理"><a href="#_30-redux原理" class="header-anchor">#</a> 30.redux原理</h3> <h3 id="_31-redux-dispatch之后如何引发页面渲染的"><a href="#_31-redux-dispatch之后如何引发页面渲染的" class="header-anchor">#</a> 31.redux dispatch之后如何引发页面渲染的</h3> <h3 id="_32-为什么使用redux"><a href="#_32-为什么使用redux" class="header-anchor">#</a> 32.为什么使用Redux</h3> <h3 id="_33-hooks原理-如何自定义hooks"><a href="#_33-hooks原理-如何自定义hooks" class="header-anchor">#</a> 33.hooks原理？如何自定义hooks</h3> <h3 id="_34-父子组件的挂载-卸载顺序"><a href="#_34-父子组件的挂载-卸载顺序" class="header-anchor">#</a> 34.父子组件的挂载，卸载顺序</h3> <div class="language- extra-class"><pre class="language-text"><code>挂载：
	1.父组件即将挂载
	2.子组件即将挂载
	3.子组件挂载完成
	4.父组件挂载完成
卸载：
	
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新于:</span> <span class="time">3/12/2021, 12:57:55 PM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ab08ac82.js" defer></script><script src="/assets/js/2.fe6dca74.js" defer></script><script src="/assets/js/80.45ff8ec4.js" defer></script>
  </body>
</html>
